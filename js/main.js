!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(3)},,,function(e,t,n){"use strict";n.r(t);new Swiper(".swiper-container",{direction:"horizontal",loop:!0,slidesPerView:"auto",pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}});jQuery((function(e){if(e(".ig-footer-navbar").length>0&&(e(".ig-footer-navbar li.menu-item-has-children ul").removeClass("dropdown-menu"),e(".ig-footer-navbar li.menu-item-has-children ul").addClass("former-dropdown-menu")),e(".content-card__text").length>0){if(e(".application-section-1").length>0){if(e(".application-section-1").addClass("content-card__visible"),e(".application-section-1").removeClass("content-card__hidden"),e("#application-section-1").addClass("side-links__item--active"),e(window).width()<=767){var t=e(".content-card__visible").outerHeight();e(".main-footer").css("margin-top","".concat(t+30,"px"))}e(window).on("resize",(function(){if(e(window).width()<=767){var t=e(".content-card__visible").outerHeight();e(".main-footer").css("margin-top","".concat(t+30,"px"))}else e(window).width()>767&&e(".main-footer").css("margin-top","0")}))}e(".side-link--target").on("click",(function(t){t.preventDefault();var n=e(".content-card__visible").attr("data-application"),a=e(this).attr("id");e(".".concat(a)).outerHeight();if(e(".".concat(n)).removeClass("content-card__visible"),e(".".concat(n)).addClass("content-card__hidden"),e("#".concat(n)).removeClass("side-links__item--active"),e(".".concat(a)).addClass("content-card__visible"),e(window).width()<=767)e(".content-card__visible").outerHeight();e("#".concat(a)).addClass("side-links__item--active"),e(".".concat(a)).removeClass("content-card__hidden")}))}if(e(".content-card").hasClass("instrument-1")){if(e(".instrument-1").removeClass("content-card__hidden--reverse "),e("#instrument-1").addClass("side-links__item--active"),e(".instrument-1").addClass("content-card__visible--teachers"),e(window).width()<=767){var n=e(".content-card__visible--teachers").outerHeight();e(".workshop__teachers").css("padding-bottom","".concat(n+20,"px"))}e(window).on("resize",(function(){if(e(window).width()<=767){var t=e(".content-card__visible--teachers").outerHeight();e(".workshop__teachers").css("padding-bottom","".concat(t+30,"px"))}else e(window).width()>767&&e(".workshop__teachers").css("padding-bottom","0")})),e(".side-link--target-instrument").on("click",(function(t){t.preventDefault();var n=e(".content-card__visible--teachers").attr("data-instrument");console.log(n);var a=e(this).attr("id");if(e(".".concat(a)).removeClass("content-card__hidden--reverse"),e(".".concat(a)).addClass("content-card__visible--teachers"),e("#".concat(a)).addClass("side-links__item--active"),e(".".concat(n)).removeClass("content-card__visible--teachers"),e(".".concat(n)).addClass("content-card__hidden--reverse"),e("#".concat(n)).removeClass("side-links__item--active"),e(window).width()<=767){var o=e(".content-card__visible--teachers").outerHeight();e(".workshop__teachers").css("padding-bottom","".concat(o+20,"px"))}}))}e(".modal").length>0&&(e(".modal-trigger-js").on("click",(function(t){t.preventDefault();var n=e(this).attr("id");e(".modal").addClass("is-open"),e("[data-modalnum=".concat(n,"]")).removeClass("modal__hidden"),e("html").addClass("no-overflow"),e("[data-modalcontent=".concat(n,"]")).addClass("modal__content--on-screen"),setTimeout((function(){e("[data-modalcontent=".concat(n,"]")).removeClass("modal__content--off-screen")}),10)})),e(".modal__close").on("click",(function(){e(".modal__content--on-screen").addClass("modal__content--off-screen"),e(".modal__content--on-screen").removeClass("modal__content--on-screen"),setTimeout((function(){e(".modal").addClass("modal__hidden"),e("html").removeClass("no-overflow")}),500)}))),e(".modal").length>0&&e(".modal").on("click",(function(){console.log("clicked"),e(".modal").hasClass("is-open")&&e(".modal__close").triggerHandler("click")}));var a=function(t,n,a,o){e(".show-all-concerts-js-ajax").hasClass("sort-by-toggler__active")&&e(".show-all-concerts-js-ajax").removeClass("sort-by-toggler__active"),e("#ig-sort-show-all").hasClass("ig_gav-invisible")&&e("#ig-sort-show-all").removeClass("ig_gav-invisible"),e(".".concat(t)).hasClass("sort-by-menu--off-screen")&&(e(".".concat(n)).hasClass("sort-by-menu--on-screen")&&(e(".".concat(n)).removeClass("sort-by-menu--on-screen"),e(".".concat(n)).addClass("sort-by-menu--off-screen")),e("#".concat(a)).removeClass("sort-by-toggler__active"),e("#".concat(o)).addClass("sort-by-toggler__active"),e(".".concat(t)).css("display","flex"),e(".".concat(t)).removeClass("sort-by-menu--off-screen"),e(".".concat(t)).addClass("sort-by-menu--on-screen"))};e("#ig-sort-by-venue").on("click",(function(e){e.preventDefault(),a("sort-by-venue","sort-by-date","ig-sort-by-date","ig-sort-by-venue")})),e("#ig-sort-by-date").on("click",(function(e){e.preventDefault(),a("sort-by-date","sort-by-venue","ig-sort-by-venue","ig-sort-by-date")})),e(".sort-by-venue-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide(),e(".sort-by-options__link").hasClass("sort-by-options__link--active")&&e(".sort-by-options__link").removeClass("sort-by-options__link--active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200),e(this).addClass("sort-by-options__link--active");var n=e(this).data("venue-id"),a=s(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",a),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:n},type:"POST",success:function(t){e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()})),o(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts")},error:function(e){console.warn(e)}})})),e(".show-all-concerts-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide(),e(".sort-by-options__link").hasClass("sort-by-options__link--active")&&e(".sort-by-options__link").removeClass("sort-by-options__link--active"),e(".sort-by-toggler").hasClass("sort-by-toggler__active")&&e(".sort-by-toggler").removeClass("sort-by-toggler__active"),e(".sort-by-venue").hasClass("sort-by-menu--on-screen")&&(e(".sort-by-venue").removeClass("sort-by-menu--on-screen"),e(".sort-by-venue").addClass("sort-by-menu--off-screen")),e(".sort-by-date").hasClass("sort-by-menu--on-screen")&&(e(".sort-by-date").removeClass("sort-by-menu--on-screen"),e(".sort-by-date").addClass("sort-by-menu--off-screen")),e(".show-all-concerts-js-ajax").addClass("sort-by-toggler__active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var n=s(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",n),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:null},type:"POST",success:function(t){o(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()}))},error:function(e){console.warn(e)}})}));var o=function(t,n,a,o,s){e(t).hasClass(n)&&e(t).removeClass(n),e(t).addClass(a),setTimeout((function(){e(t).html(o),e(t).removeClass(a),e(t).addClass(n),e(s).css("min-height","auto")}),500)};e(".sort-by-date-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide();var n=e(this).data("concert-date");e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var a=s(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",a),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:"non-venue-choice",datechoice:n,dateFromAjax:!0},type:"POST",success:function(t){o(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()}))},error:function(e){console.warn(e)}})})),e(".festival-year-toggler-js-ajax").on("click",(function(t){t.preventDefault();var n=e(this).data("festival-year");e(".extra-year-info-js").text(n),e(".festival-year-toggler-js-ajax").hasClass("sort-by-toggler__active")&&e(".festival-year-toggler-js-ajax").removeClass("sort-by-toggler__active"),e(this).addClass("sort-by-toggler__active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var a=s(".history-wrapper");e(".current-year-artists__history").css("min-height",a),e.ajax({url:wpAjax.ajaxUrl,data:{action:"getHistory",festivalQueryYear:n},type:"POST",success:function(t){e(".history-wrapper").html()!==t&&(o(".history-wrapper","history-wrapper__on-screen","history-wrapper__off-screen",t,".current-year-artists__history"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()})))},error:function(e){console.warn(e)}})}));var s=function(t){if(e(t).length>0)return e(t).height()}}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2pzLXBhcnRpYWxzL3N3aXBlci1jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTd2lwZXIiLCJkaXJlY3Rpb24iLCJsb29wIiwic2xpZGVzUGVyVmlldyIsInBhZ2luYXRpb24iLCJlbCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzY3JvbGxiYXIiLCJqUXVlcnkiLCIkIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIndpbmRvdyIsIndpZHRoIiwiY3VycmVudEJveEhlaWdodCIsIm91dGVySGVpZ2h0IiwiY3NzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJhY3RpdmVDbGFzcyIsImF0dHIiLCJ0YXJnZXRDbGFzcyIsInRoaXMiLCJoYXNDbGFzcyIsImNvbnNvbGUiLCJsb2ciLCJtb2RhbFRhcmdldCIsInNldFRpbWVvdXQiLCJ0cmlnZ2VySGFuZGxlciIsInRvZ2dsZVNvcnRPcHRpb25zIiwic2hvd1RvZ2dsZU5hbWUiLCJoaWRlVG9nZ2xlTmFtZSIsIm9wcG9zaXRlVG9nZ2xlcklkIiwidGhpc1RvZ2dsZUlkIiwiaGlkZSIsImFwcGVuZCIsImZhZGVJbiIsInZlbnVlSUQiLCJkYXRhIiwiY3VycmVudENvbnRhaW5lckhlaWdodCIsInByZUFqYXhTZXR1cCIsImFqYXgiLCJ1cmwiLCJ3cEFqYXgiLCJhamF4VXJsIiwiYWN0aW9uIiwidHlwZSIsInN1Y2Nlc3MiLCJmYWRlT3V0IiwicmVtb3ZlIiwiYW5pbWF0ZUFqYXgiLCJlcnJvciIsIndhcm4iLCJ0YXJnZXREaXYiLCJhbmltYXRpb25DbGFzc09uIiwiYW5pbWF0aW9uQ2xhc3NPZmYiLCJyZW1vdmVNaW5IZWlnaHRUYXJnZXQiLCJodG1sIiwiZGF0ZWNob2ljZSIsImRhdGVGcm9tQWpheCIsImZlc3RpdmFsUXVlcnlZZWFyIiwidGV4dCIsImhlaWdodCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPckIsRUFBb0JVLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ6QixFQUFvQjZCLEVBQUksU0FBUzFCLEdBQ2hDLElBQUlTLEVBQVNULEdBQVVBLEVBQU9xQixXQUM3QixXQUF3QixPQUFPckIsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUgsRUFBb0JVLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJaLEVBQW9CYSxFQUFJLFNBQVNpQixFQUFRQyxHQUFZLE9BQU9qQixPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1QixFQUFRQyxJQUd6Ry9CLEVBQW9Ca0MsRUFBSSxHQUlqQmxDLEVBQW9CQSxFQUFvQm1DLEVBQUksRyx3RUNqRjdCLElBQUlDLE9BQU8sb0JBQXFCLENBRXBEQyxVQUFXLGFBQ1hDLE1BQU0sRUFDTkMsY0FBZSxPQUdmQyxXQUFZLENBQ1ZDLEdBQUksc0JBSU5DLFdBQVksQ0FDVkMsT0FBUSxzQkFDUkMsT0FBUSx1QkFJVkMsVUFBVyxDQUNUSixHQUFJLHVCQ2hCVkssUUFBTyxTQUFVQyxHQWtCZixHQVpJQSxFQUFFLHFCQUFxQkMsT0FBUyxJQUVsQ0QsRUFBRSxrREFBa0RFLFlBQ2xELGlCQUVGRixFQUFFLGtEQUFrREcsU0FDbEQseUJBTUFILEVBQUUsdUJBQXVCQyxPQUFTLEVBQUcsQ0FDdkMsR0FBSUQsRUFBRSwwQkFBMEJDLE9BQVMsRUFBRyxDQUsxQyxHQUpBRCxFQUFFLDBCQUEwQkcsU0FBUyx5QkFDckNILEVBQUUsMEJBQTBCRSxZQUFZLHdCQUN4Q0YsRUFBRSwwQkFBMEJHLFNBQVMsNEJBRWpDSCxFQUFFSSxRQUFRQyxTQXZCQSxJQXVCc0IsQ0FDbEMsSUFBTUMsRUFBbUJOLEVBQUUsMEJBQTBCTyxjQUNyRFAsRUFBRSxnQkFBZ0JRLElBQUksYUFBdEIsVUFBdUNGLEVBQW1CLEdBQTFELE9BRUZOLEVBQUVJLFFBQVFLLEdBQUcsVUFBVSxXQUNyQixHQUFJVCxFQUFFSSxRQUFRQyxTQTVCRixJQTRCd0IsQ0FDbEMsSUFBTUMsRUFBbUJOLEVBQUUsMEJBQTBCTyxjQUVyRFAsRUFBRSxnQkFBZ0JRLElBQUksYUFBdEIsVUFBdUNGLEVBQW1CLEdBQTFELFlBQ1NOLEVBQUVJLFFBQVFDLFFBaENULEtBaUNWTCxFQUFFLGdCQUFnQlEsSUFBSSxhQUF0QixRQUtOUixFQUFFLHNCQUFzQlMsR0FBRyxTQUFTLFNBQVVDLEdBQzVDQSxFQUFFQyxpQkFFRixJQUFNQyxFQUFjWixFQUFFLDBCQUEwQmEsS0FBSyxvQkFDL0NDLEVBQWNkLEVBQUVlLE1BQU1GLEtBQUssTUFDUmIsRUFBRSxJQUFELE9BQUtjLElBQWVQLGNBVTlDLEdBTkFQLEVBQUUsSUFBRCxPQUFLWSxJQUFlVixZQUFZLHlCQUNqQ0YsRUFBRSxJQUFELE9BQUtZLElBQWVULFNBQVMsd0JBQzlCSCxFQUFFLElBQUQsT0FBS1ksSUFBZVYsWUFBWSw0QkFFakNGLEVBQUUsSUFBRCxPQUFLYyxJQUFlWCxTQUFTLHlCQUUxQkgsRUFBRUksUUFBUUMsU0FyREEsSUFzRGFMLEVBQUUsMEJBQTBCTyxjQUd2RFAsRUFBRSxJQUFELE9BQUtjLElBQWVYLFNBQVMsNEJBRTlCSCxFQUFFLElBQUQsT0FBS2MsSUFBZVosWUFBWSwyQkFNckMsR0FBSUYsRUFBRSxpQkFBaUJnQixTQUFTLGdCQUFpQixDQUkvQyxHQUhBaEIsRUFBRSxpQkFBaUJFLFlBQVksa0NBQy9CRixFQUFFLGlCQUFpQkcsU0FBUyw0QkFDNUJILEVBQUUsaUJBQWlCRyxTQUFTLG1DQUN4QkgsRUFBRUksUUFBUUMsU0FyRUUsSUFxRW9CLENBQ2xDLElBQU1DLEVBQW1CTixFQUN2QixvQ0FDQU8sY0FDRlAsRUFBRSx1QkFBdUJRLElBQ3ZCLGlCQURGLFVBRUtGLEVBQW1CLEdBRnhCLE9BTUZOLEVBQUVJLFFBQVFLLEdBQUcsVUFBVSxXQUNyQixHQUFJVCxFQUFFSSxRQUFRQyxTQWhGQSxJQWdGc0IsQ0FDbEMsSUFBTUMsRUFBbUJOLEVBQ3ZCLG9DQUNBTyxjQUVGUCxFQUFFLHVCQUF1QlEsSUFDdkIsaUJBREYsVUFFS0YsRUFBbUIsR0FGeEIsWUFJU04sRUFBRUksUUFBUUMsUUF6RlAsS0EwRlpMLEVBQUUsdUJBQXVCUSxJQUFJLGlCQUE3QixRQUlKUixFQUFFLGlDQUFpQ1MsR0FBRyxTQUFTLFNBQVVDLEdBQ3ZEQSxFQUFFQyxpQkFFRixJQUFNQyxFQUFjWixFQUFFLG9DQUFvQ2EsS0FDeEQsbUJBRUZJLFFBQVFDLElBQUlOLEdBQ1osSUFBTUUsRUFBY2QsRUFBRWUsTUFBTUYsS0FBSyxNQU9qQyxHQU5BYixFQUFFLElBQUQsT0FBS2MsSUFBZVosWUFBWSxpQ0FDakNGLEVBQUUsSUFBRCxPQUFLYyxJQUFlWCxTQUFTLG1DQUM5QkgsRUFBRSxJQUFELE9BQUtjLElBQWVYLFNBQVMsNEJBQzlCSCxFQUFFLElBQUQsT0FBS1ksSUFBZVYsWUFBWSxtQ0FDakNGLEVBQUUsSUFBRCxPQUFLWSxJQUFlVCxTQUFTLGlDQUM5QkgsRUFBRSxJQUFELE9BQUtZLElBQWVWLFlBQVksNEJBQzdCRixFQUFFSSxRQUFRQyxTQTVHQSxJQTRHc0IsQ0FDbEMsSUFBTUMsRUFBbUJOLEVBQ3ZCLG9DQUNBTyxjQUNGUCxFQUFFLHVCQUF1QlEsSUFDdkIsaUJBREYsVUFFS0YsRUFBbUIsR0FGeEIsV0FVRk4sRUFBRSxVQUFVQyxPQUFTLElBQ3ZCRCxFQUFFLHFCQUFxQlMsR0FBRyxTQUFTLFNBQVVDLEdBQzNDQSxFQUFFQyxpQkFJRixJQUFNUSxFQUFjbkIsRUFBRWUsTUFBTUYsS0FBSyxNQUNqQ2IsRUFBRSxVQUFVRyxTQUFTLFdBQ3JCSCxFQUFFLGtCQUFELE9BQW1CbUIsRUFBbkIsTUFBbUNqQixZQUFZLGlCQUNoREYsRUFBRSxRQUFRRyxTQUFTLGVBQ25CSCxFQUFFLHNCQUFELE9BQXVCbUIsRUFBdkIsTUFBdUNoQixTQUN0Qyw2QkFHRmlCLFlBQVcsV0FDVHBCLEVBQUUsc0JBQUQsT0FBdUJtQixFQUF2QixNQUF1Q2pCLFlBQ3RDLGdDQUVELE9BRUxGLEVBQUUsaUJBQWlCUyxHQUFHLFNBQVMsV0FDN0JULEVBQUUsOEJBQThCRyxTQUFTLDhCQUN6Q0gsRUFBRSw4QkFBOEJFLFlBQVksNkJBQzVDa0IsWUFBVyxXQUNUcEIsRUFBRSxVQUFVRyxTQUFTLGlCQUNyQkgsRUFBRSxRQUFRRSxZQUFZLGlCQUNyQixTQUlIRixFQUFFLFVBQVVDLE9BQVMsR0FDdkJELEVBQUUsVUFBVVMsR0FBRyxTQUFTLFdBQ3RCUSxRQUFRQyxJQUFJLFdBQ1JsQixFQUFFLFVBQVVnQixTQUFTLFlBQ3ZCaEIsRUFBRSxpQkFBaUJxQixlQUFlLFlBcUJ4QyxJQUFNQyxFQUFvQixTQUN4QkMsRUFDQUMsRUFDQUMsRUFDQUMsR0FFSTFCLEVBQUUsOEJBQThCZ0IsU0FBUyw0QkFDM0NoQixFQUFFLDhCQUE4QkUsWUFBWSwyQkFHMUNGLEVBQUUscUJBQXFCZ0IsU0FBUyxxQkFDbENoQixFQUFFLHFCQUFxQkUsWUFBWSxvQkFHakNGLEVBQUUsSUFBRCxPQUFLdUIsSUFBa0JQLFNBQVMsOEJBQy9CaEIsRUFBRSxJQUFELE9BQUt3QixJQUFrQlIsU0FBUyw2QkFDbkNoQixFQUFFLElBQUQsT0FBS3dCLElBQWtCdEIsWUFBWSwyQkFDcENGLEVBQUUsSUFBRCxPQUFLd0IsSUFBa0JyQixTQUFTLDZCQUluQ0gsRUFBRSxJQUFELE9BQUt5QixJQUFxQnZCLFlBQVksMkJBRXZDRixFQUFFLElBQUQsT0FBSzBCLElBQWdCdkIsU0FBUywyQkFHL0JILEVBQUUsSUFBRCxPQUFLdUIsSUFBa0JmLElBQUksVUFBVyxRQUN2Q1IsRUFBRSxJQUFELE9BQUt1QixJQUFrQnJCLFlBQVksNEJBQ3BDRixFQUFFLElBQUQsT0FBS3VCLElBQWtCcEIsU0FBUyw2QkFNckNILEVBQUUscUJBQXFCUyxHQUFHLFNBQVMsU0FBVUMsR0FDM0NBLEVBQUVDLGlCQUNGVyxFQUNFLGdCQUNBLGVBQ0Esa0JBQ0EsdUJBR0p0QixFQUFFLG9CQUFvQlMsR0FBRyxTQUFTLFNBQVVDLEdBQzFDQSxFQUFFQyxpQkFDRlcsRUFDRSxlQUNBLGdCQUNBLG1CQUNBLHNCQUlKdEIsRUFBRSwwQkFBMEJTLEdBQUcsU0FBUyxTQUFVQyxHQUNoREEsRUFBRUMsaUJBQ0ZYLEVBQUUsd0JBQXdCMkIsT0FDdEIzQixFQUFFLDBCQUEwQmdCLFNBQVMsa0NBQ3ZDaEIsRUFBRSwwQkFBMEJFLFlBQVksaUNBSTFDRixFQUFFLHdDQUNDMkIsT0FDQUMsT0FGSCwrQ0FLSUMsT0FBTyxLQUNYN0IsRUFBRWUsTUFBTVosU0FBUyxpQ0FDakIsSUFBTTJCLEVBQVU5QixFQUFFZSxNQUFNZ0IsS0FBSyxZQUN2QkMsRUFBeUJDLEVBQWEsaUNBQzVDakMsRUFBRSwyQkFBMkJRLElBQUksYUFBY3dCLEdBRS9DaEMsRUFBRWtDLEtBQUssQ0FDTEMsSUFBS0MsT0FBT0MsUUFDWk4sS0FBTSxDQUFFTyxPQUFRLFNBQVVSLFFBQVNBLEdBQ25DUyxLQUFNLE9BQ05DLFFBQVMsU0FBVVQsR0FDakIvQixFQUFFLHVCQUF1QnlDLFNBQVEsV0FDL0J6QyxFQUFFLHVCQUF1QjBDLFlBRzNCQyxFQUNFLGdDQUNBLDZCQUNBLDhCQUNBWixFQUNBLDRCQUtKYSxNQUFPLFNBQVVBLEdBQ2YzQixRQUFRNEIsS0FBS0QsU0FLbkI1QyxFQUFFLDhCQUE4QlMsR0FBRyxTQUFTLFNBQVVDLEdBQ3BEQSxFQUFFQyxpQkFDRlgsRUFBRSx3QkFBd0IyQixPQUN0QjNCLEVBQUUsMEJBQTBCZ0IsU0FBUyxrQ0FDdkNoQixFQUFFLDBCQUEwQkUsWUFBWSxpQ0FFdENGLEVBQUUsb0JBQW9CZ0IsU0FBUyw0QkFDakNoQixFQUFFLG9CQUFvQkUsWUFBWSwyQkFFaENGLEVBQUUsa0JBQWtCZ0IsU0FBUyw2QkFDL0JoQixFQUFFLGtCQUFrQkUsWUFBWSwyQkFDaENGLEVBQUUsa0JBQWtCRyxTQUFTLDZCQUUzQkgsRUFBRSxpQkFBaUJnQixTQUFTLDZCQUM5QmhCLEVBQUUsaUJBQWlCRSxZQUFZLDJCQUMvQkYsRUFBRSxpQkFBaUJHLFNBQVMsNkJBRTlCSCxFQUFFLDhCQUE4QkcsU0FBUywyQkFFekNILEVBQUUsd0NBQ0QyQixPQUNBQyxPQUZELCtDQUtFQyxPQUFPLEtBRVQsSUFBTUcsRUFBeUJDLEVBQWEsaUNBQzVDakMsRUFBRSwyQkFBMkJRLElBQUksYUFBY3dCLEdBQy9DaEMsRUFBRWtDLEtBQUssQ0FDTEMsSUFBS0MsT0FBT0MsUUFDWk4sS0FBTSxDQUFFTyxPQUFRLFNBQVVSLFFBQVMsTUFDbkNTLEtBQU0sT0FDTkMsUUFBUyxTQUFVVCxHQUNqQlksRUFDRSxnQ0FDQSw2QkFDQSw4QkFDQVosRUFDQSwyQkFFRi9CLEVBQUUsdUJBQXVCeUMsU0FBUSxXQUMvQnpDLEVBQUUsdUJBQXVCMEMsYUFHN0JFLE1BQU8sU0FBVUEsR0FDZjNCLFFBQVE0QixLQUFLRCxTQUtuQixJQUFNRCxFQUFjLFNBQ2xCRyxFQUNBQyxFQUNBQyxFQUNBakIsRUFDQWtCLEdBRUlqRCxFQUFFOEMsR0FBVzlCLFNBQVMrQixJQUN4Qi9DLEVBQUU4QyxHQUFXNUMsWUFBWTZDLEdBRzNCL0MsRUFBRThDLEdBQVczQyxTQUFTNkMsR0FDdEI1QixZQUFXLFdBQ1RwQixFQUFFOEMsR0FBV0ksS0FBS25CLEdBRWxCL0IsRUFBRThDLEdBQVc1QyxZQUFZOEMsR0FDekJoRCxFQUFFOEMsR0FBVzNDLFNBQVM0QyxHQUN4Qi9DLEVBQUVpRCxHQUF1QnpDLElBQUksYUFBYyxVQUV4QyxNQUdMUixFQUFFLHlCQUF5QlMsR0FBRyxTQUFTLFNBQVVDLEdBQy9DQSxFQUFFQyxpQkFDRlgsRUFBRSx3QkFBd0IyQixPQUMxQixJQUFNd0IsRUFBYW5ELEVBQUVlLE1BQU1nQixLQUFLLGdCQUdoQy9CLEVBQUUsd0NBQ0QyQixPQUNBQyxPQUZELCtDQUtFQyxPQUFPLEtBRVQsSUFBTUcsRUFBeUJDLEVBQWEsaUNBQzVDakMsRUFBRSwyQkFBMkJRLElBQUksYUFBY3dCLEdBRS9DaEMsRUFBRWtDLEtBQUssQ0FDTEMsSUFBS0MsT0FBT0MsUUFDWk4sS0FBTSxDQUNKTyxPQUFRLFNBQ1JSLFFBQVMsbUJBQ1RxQixXQUFZQSxFQUNaQyxjQUFjLEdBRWhCYixLQUFNLE9BQ05DLFFBQVMsU0FBVVQsR0FDakJZLEVBQ0UsZ0NBQ0EsNkJBQ0EsOEJBQ0FaLEVBQ0EsMkJBRUYvQixFQUFFLHVCQUF1QnlDLFNBQVEsV0FDL0J6QyxFQUFFLHVCQUF1QjBDLGFBRzdCRSxNQUFPLFNBQVVBLEdBQ2YzQixRQUFRNEIsS0FBS0QsU0FPbkI1QyxFQUFFLGtDQUFrQ1MsR0FBRyxTQUFTLFNBQVVDLEdBQ3hEQSxFQUFFQyxpQkFDRixJQUFNMEMsRUFBb0JyRCxFQUFFZSxNQUFNZ0IsS0FBSyxpQkFDdkMvQixFQUFFLHVCQUF1QnNELEtBQUtELEdBRTVCckQsRUFBRSxrQ0FBa0NnQixTQUFTLDRCQUU3Q2hCLEVBQUUsa0NBQWtDRSxZQUNsQywyQkFHSkYsRUFBRWUsTUFBTVosU0FBUywyQkFJakJILEVBQUUsd0NBQ0QyQixPQUNBQyxPQUZELCtDQUtFQyxPQUFPLEtBRVQsSUFBTUcsRUFBeUJDLEVBQWEsb0JBQzVDakMsRUFBRSxrQ0FBa0NRLElBQUksYUFBY3dCLEdBR3REaEMsRUFBRWtDLEtBQUssQ0FDTEMsSUFBS0MsT0FBT0MsUUFDWk4sS0FBTSxDQUFFTyxPQUFRLGFBQWNlLHFCQUM5QmQsS0FBTSxPQUNOQyxRQUFTLFNBQVVULEdBQ2IvQixFQUFFLG9CQUFvQmtELFNBQVduQixJQUNuQ1ksRUFDRSxtQkFDQSw2QkFDQSw4QkFDQVosRUFDQSxrQ0FFRi9CLEVBQUUsdUJBQXVCeUMsU0FBUSxXQUMvQnpDLEVBQUUsdUJBQXVCMEMsY0FJL0JFLE1BQU8sU0FBVUEsR0FDZjNCLFFBQVE0QixLQUFLRCxTQVNyQixJQUFNWCxFQUFlLFNBQUNhLEdBQ3BCLEdBQUc5QyxFQUFFOEMsR0FBVzdDLE9BQVMsRUFDdkIsT0FBT0QsRUFBRThDLEdBQVdTIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIgIC8vIGluaXQgU3dpcGVyOlxuICBleHBvcnQgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcihcIi5zd2lwZXItY29udGFpbmVyXCIsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICBsb29wOiB0cnVlLFxuICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxuXG4gICAgLy8gSWYgd2UgbmVlZCBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uXCIsXG4gICAgfSxcblxuICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4gICAgfSxcblxuICAgIC8vIEFuZCBpZiB3ZSBuZWVkIHNjcm9sbGJhclxuICAgIHNjcm9sbGJhcjoge1xuICAgICAgZWw6IFwiLnN3aXBlci1zY3JvbGxiYXJcIixcbiAgICB9LFxuICB9KTtcbiIsIlxuICBpbXBvcnQge3N3aXBlcn0gZnJvbSAnLi9qcy1wYXJ0aWFscy9zd2lwZXItY29uZmlnLmpzJztcblxuXG5qUXVlcnkoZnVuY3Rpb24gKCQpIHtcbiAgY29uc3QgQlBfTUVESVVNID0gNzY3O1xuXG5cbiAgLy8gb3BlbiBhbGwgdGhlIHN1Ym1lbnUgaW4gZm9vdGVyXG5cbiAgaWYgKCQoXCIuaWctZm9vdGVyLW5hdmJhclwiKS5sZW5ndGggPiAwKSB7XG4gIFxuICAgICQoXCIuaWctZm9vdGVyLW5hdmJhciBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuIHVsXCIpLnJlbW92ZUNsYXNzKFxuICAgICAgXCJkcm9wZG93bi1tZW51XCJcbiAgICApO1xuICAgICQoXCIuaWctZm9vdGVyLW5hdmJhciBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuIHVsXCIpLmFkZENsYXNzKFxuICAgICAgXCJmb3JtZXItZHJvcGRvd24tbWVudVwiXG4gICAgKTtcbiAgfVxuXG4gIC8vU2xpZGVyIGZvciB0ZXh0IGNhcmQgaW4gYXBwbGljYXRpb24gc2VjdGlvblxuXG4gIGlmICgkKFwiLmNvbnRlbnQtY2FyZF9fdGV4dFwiKS5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCQoXCIuYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICQoXCIuYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmFkZENsYXNzKFwiY29udGVudC1jYXJkX192aXNpYmxlXCIpO1xuICAgICAgJChcIi5hcHBsaWNhdGlvbi1zZWN0aW9uLTFcIikucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlblwiKTtcbiAgICAgICQoXCIjYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuXG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gQlBfTUVESVVNKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAkKGAubWFpbi1mb290ZXJgKS5jc3MoXCJtYXJnaW4tdG9wXCIsIGAke2N1cnJlbnRCb3hIZWlnaHQgKyAzMH1weGApO1xuICAgICAgfVxuICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKS5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgICAgJChgLm1haW4tZm9vdGVyYCkuY3NzKFwibWFyZ2luLXRvcFwiLCBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMzB9cHhgKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IEJQX01FRElVTSkge1xuICAgICAgICAgICQoYC5tYWluLWZvb3RlcmApLmNzcyhcIm1hcmdpbi10b3BcIiwgYDBgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJChcIi5zaWRlLWxpbmstLXRhcmdldFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gJChcIi5jb250ZW50LWNhcmRfX3Zpc2libGVcIikuYXR0cihcImRhdGEtYXBwbGljYXRpb25cIik7XG4gICAgICBjb25zdCB0YXJnZXRDbGFzcyA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoYC4ke3RhcmdldENsYXNzfWApLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRCb3hIZWlnaHQpO1xuXG4gICAgICAkKGAuJHthY3RpdmVDbGFzc31gKS5yZW1vdmVDbGFzcyhcImNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKTtcbiAgICAgICQoYC4ke2FjdGl2ZUNsYXNzfWApLmFkZENsYXNzKFwiY29udGVudC1jYXJkX19oaWRkZW5cIik7XG4gICAgICAkKGAjJHthY3RpdmVDbGFzc31gKS5yZW1vdmVDbGFzcyhcInNpZGUtbGlua3NfX2l0ZW0tLWFjdGl2ZVwiKTtcblxuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkuYWRkQ2xhc3MoXCJjb250ZW50LWNhcmRfX3Zpc2libGVcIik7XG5cbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSBCUF9NRURJVU0pIHtcbiAgICAgICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoXCIuY29udGVudC1jYXJkX192aXNpYmxlXCIpLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIC8vICQoYC5tYWluLWZvb3RlcmApLmNzcyhcIm1hcmdpbi10b3BcIiwgYCR7Y3VycmVudEJveEhlaWdodCArIDMwfXB4YCk7XG4gICAgICB9XG4gICAgICAkKGAjJHt0YXJnZXRDbGFzc31gKS5hZGRDbGFzcyhcInNpZGUtbGlua3NfX2l0ZW0tLWFjdGl2ZVwiKTtcblxuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlblwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vU2xpZGVyIGZvciB0ZXh0IGNhcmQgaW4gdGVhY2hlcnMgc2VjdGlvbiBzZWN0aW9uXG5cbiAgaWYgKCQoXCIuY29udGVudC1jYXJkXCIpLmhhc0NsYXNzKFwiaW5zdHJ1bWVudC0xXCIpKSB7XG4gICAgJChcIi5pbnN0cnVtZW50LTFcIikucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZSBcIik7XG4gICAgJChgI2luc3RydW1lbnQtMWApLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICQoYC5pbnN0cnVtZW50LTFgKS5hZGRDbGFzcyhcImNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIik7XG4gICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoXG4gICAgICAgIFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIlxuICAgICAgKS5vdXRlckhlaWdodCgpO1xuICAgICAgJChgLndvcmtzaG9wX190ZWFjaGVyc2ApLmNzcyhcbiAgICAgICAgXCJwYWRkaW5nLWJvdHRvbVwiLFxuICAgICAgICBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMjB9cHhgXG4gICAgICApO1xuICAgIH1cblxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gQlBfTUVESVVNKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFxuICAgICAgICAgIFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIlxuICAgICAgICApLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgJChgLndvcmtzaG9wX190ZWFjaGVyc2ApLmNzcyhcbiAgICAgICAgICBcInBhZGRpbmctYm90dG9tXCIsXG4gICAgICAgICAgYCR7Y3VycmVudEJveEhlaWdodCArIDMwfXB4YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IEJQX01FRElVTSkge1xuICAgICAgICAkKGAud29ya3Nob3BfX3RlYWNoZXJzYCkuY3NzKFwicGFkZGluZy1ib3R0b21cIiwgYDBgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoXCIuc2lkZS1saW5rLS10YXJnZXQtaW5zdHJ1bWVudFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gJChcIi5jb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCIpLmF0dHIoXG4gICAgICAgIFwiZGF0YS1pbnN0cnVtZW50XCJcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhhY3RpdmVDbGFzcyk7XG4gICAgICBjb25zdCB0YXJnZXRDbGFzcyA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZVwiKTtcbiAgICAgICQoYC4ke3RhcmdldENsYXNzfWApLmFkZENsYXNzKFwiY29udGVudC1jYXJkX192aXNpYmxlLS10ZWFjaGVyc1wiKTtcbiAgICAgICQoYCMke3RhcmdldENsYXNzfWApLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICAgJChgLiR7YWN0aXZlQ2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCIpO1xuICAgICAgJChgLiR7YWN0aXZlQ2xhc3N9YCkuYWRkQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZVwiKTtcbiAgICAgICQoYCMke2FjdGl2ZUNsYXNzfWApLnJlbW92ZUNsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgICAgICBjb25zdCBjdXJyZW50Qm94SGVpZ2h0ID0gJChcbiAgICAgICAgICBcIi5jb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCJcbiAgICAgICAgKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAkKGAud29ya3Nob3BfX3RlYWNoZXJzYCkuY3NzKFxuICAgICAgICAgIFwicGFkZGluZy1ib3R0b21cIixcbiAgICAgICAgICBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMjB9cHhgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvL21vZGFsIHBvcHVwXG5cbiAgaWYgKCQoXCIubW9kYWxcIikubGVuZ3RoID4gMCkge1xuICAgICQoXCIubW9kYWwtdHJpZ2dlci1qc1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIC8vY2FzZSBmb3IgYmFsdGljIGRydW1tZXJzIGxlYWd1ZSBmaW5hbGlzdHNcblxuICAgICAgY29uc3QgbW9kYWxUYXJnZXQgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcbiAgICAgICQoXCIubW9kYWxcIikuYWRkQ2xhc3MoXCJpcy1vcGVuXCIpO1xuICAgICAgJChgW2RhdGEtbW9kYWxudW09JHttb2RhbFRhcmdldH1dYCkucmVtb3ZlQ2xhc3MoXCJtb2RhbF9faGlkZGVuXCIpO1xuICAgICAgJChcImh0bWxcIikuYWRkQ2xhc3MoXCJuby1vdmVyZmxvd1wiKTtcbiAgICAgICQoYFtkYXRhLW1vZGFsY29udGVudD0ke21vZGFsVGFyZ2V0fV1gKS5hZGRDbGFzcyhcbiAgICAgICAgXCJtb2RhbF9fY29udGVudC0tb24tc2NyZWVuXCJcbiAgICAgICk7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAkKGBbZGF0YS1tb2RhbGNvbnRlbnQ9JHttb2RhbFRhcmdldH1dYCkucmVtb3ZlQ2xhc3MoXG4gICAgICAgICAgXCJtb2RhbF9fY29udGVudC0tb2ZmLXNjcmVlblwiXG4gICAgICAgICk7XG4gICAgICB9LCAxMCk7XG4gICAgfSk7XG4gICAgJChcIi5tb2RhbF9fY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKFwiLm1vZGFsX19jb250ZW50LS1vbi1zY3JlZW5cIikuYWRkQ2xhc3MoXCJtb2RhbF9fY29udGVudC0tb2ZmLXNjcmVlblwiKTtcbiAgICAgICQoXCIubW9kYWxfX2NvbnRlbnQtLW9uLXNjcmVlblwiKS5yZW1vdmVDbGFzcyhcIm1vZGFsX19jb250ZW50LS1vbi1zY3JlZW5cIik7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJChcIi5tb2RhbFwiKS5hZGRDbGFzcyhcIm1vZGFsX19oaWRkZW5cIik7XG4gICAgICAgICQoXCJodG1sXCIpLnJlbW92ZUNsYXNzKFwibm8tb3ZlcmZsb3dcIik7XG4gICAgICB9LCA1MDApO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKCQoXCIubW9kYWxcIikubGVuZ3RoID4gMCkge1xuICAgICQoXCIubW9kYWxcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImNsaWNrZWRcIik7XG4gICAgICBpZiAoJChcIi5tb2RhbFwiKS5oYXNDbGFzcyhcImlzLW9wZW5cIikpIHtcbiAgICAgICAgJChcIi5tb2RhbF9fY2xvc2VcIikudHJpZ2dlckhhbmRsZXIoXCJjbGlja1wiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vICQoXCIjaWctc29ydC1ieS12ZW51ZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgIGlmICgkKFwiLnNvcnQtYnktdmVudWVcIikuaGFzQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9mZi1zY3JlZW5cIikpIHtcblxuICAvLyAgICAgaWYoJChcIiNzb3J0LWJ5LWRhdGVcIikuaGFzQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKSkge1xuICAvLyAgICAgICAkKFwiI3NvcnQtYnktZGF0ZVwiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktbWVudS0tb24tc2NyZWVuXCIpO1xuICAvLyAgICAgfVxuICAvLyAgICAgJCgnLnNvcnQtYnktdmVudWUnKS5jc3MoXCJkaXNwbGF5XCIsICdmbGV4Jyk7XG4gIC8vICAgICAkKFwiLnNvcnQtYnktdmVudWVcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9mZi1zY3JlZW5cIik7XG4gIC8vICAgICAkKFwiLnNvcnQtYnktdmVudWVcIikuYWRkQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcblxuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vQUpBWCBGSUxURVJTLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGNvbnN0IHRvZ2dsZVNvcnRPcHRpb25zID0gKFxuICAgIHNob3dUb2dnbGVOYW1lLFxuICAgIGhpZGVUb2dnbGVOYW1lLFxuICAgIG9wcG9zaXRlVG9nZ2xlcklkLFxuICAgIHRoaXNUb2dnbGVJZFxuICApID0+IHtcbiAgICBpZiAoJChcIi5zaG93LWFsbC1jb25jZXJ0cy1qcy1hamF4XCIpLmhhc0NsYXNzKFwic29ydC1ieS10b2dnbGVyX19hY3RpdmVcIikpIHtcbiAgICAgICQoXCIuc2hvdy1hbGwtY29uY2VydHMtanMtYWpheFwiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIGlmICgkKFwiI2lnLXNvcnQtc2hvdy1hbGxcIikuaGFzQ2xhc3MoXCJpZ19nYXYtaW52aXNpYmxlXCIpKSB7XG4gICAgICAkKFwiI2lnLXNvcnQtc2hvdy1hbGxcIikucmVtb3ZlQ2xhc3MoXCJpZ19nYXYtaW52aXNpYmxlXCIpO1xuICAgIH1cblxuICAgIGlmICgkKGAuJHtzaG93VG9nZ2xlTmFtZX1gKS5oYXNDbGFzcyhcInNvcnQtYnktbWVudS0tb2ZmLXNjcmVlblwiKSkge1xuICAgICAgaWYgKCQoYC4ke2hpZGVUb2dnbGVOYW1lfWApLmhhc0NsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIikpIHtcbiAgICAgICAgJChgLiR7aGlkZVRvZ2dsZU5hbWV9YCkucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcbiAgICAgICAgJChgLiR7aGlkZVRvZ2dsZU5hbWV9YCkuYWRkQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9mZi1zY3JlZW5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmKCQoYCMke29wcG9zaXRlVG9nZ2xlcklkfWApLmhhc0NsYXNzKCdzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZScpKSB7XG4gICAgICAkKGAjJHtvcHBvc2l0ZVRvZ2dsZXJJZH1gKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpO1xuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICQoYCMke3RoaXNUb2dnbGVJZH1gKS5hZGRDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpO1xuXG4gICAgICAvLyB9XG4gICAgICAkKGAuJHtzaG93VG9nZ2xlTmFtZX1gKS5jc3MoXCJkaXNwbGF5XCIsIFwiZmxleFwiKTtcbiAgICAgICQoYC4ke3Nob3dUb2dnbGVOYW1lfWApLnJlbW92ZUNsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpO1xuICAgICAgJChgLiR7c2hvd1RvZ2dsZU5hbWV9YCkuYWRkQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcbiAgICB9XG4gIH07XG5cblxuXG4gICQoXCIjaWctc29ydC1ieS12ZW51ZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRvZ2dsZVNvcnRPcHRpb25zKFxuICAgICAgXCJzb3J0LWJ5LXZlbnVlXCIsXG4gICAgICBcInNvcnQtYnktZGF0ZVwiLFxuICAgICAgXCJpZy1zb3J0LWJ5LWRhdGVcIixcbiAgICAgIFwiaWctc29ydC1ieS12ZW51ZVwiXG4gICAgKTtcbiAgfSk7XG4gICQoXCIjaWctc29ydC1ieS1kYXRlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdG9nZ2xlU29ydE9wdGlvbnMoXG4gICAgICBcInNvcnQtYnktZGF0ZVwiLFxuICAgICAgXCJzb3J0LWJ5LXZlbnVlXCIsXG4gICAgICBcImlnLXNvcnQtYnktdmVudWVcIixcbiAgICAgIFwiaWctc29ydC1ieS1kYXRlXCJcbiAgICApO1xuICB9KTtcblxuICAkKFwiLnNvcnQtYnktdmVudWUtanMtYWpheFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoXCIuanMtaGlkZS1kaXYtb24tYWpheFwiKS5oaWRlKCk7XG4gICAgaWYgKCQoXCIuc29ydC1ieS1vcHRpb25zX19saW5rXCIpLmhhc0NsYXNzKFwic29ydC1ieS1vcHRpb25zX19saW5rLS1hY3RpdmVcIikpIHtcbiAgICAgICQoXCIuc29ydC1ieS1vcHRpb25zX19saW5rXCIpLnJlbW92ZUNsYXNzKFwic29ydC1ieS1vcHRpb25zX19saW5rLS1hY3RpdmVcIik7XG4gICAgfVxuXG5cbiAgICAkKFwiLnRhcmdldC1kaXYtZm9yLW1vZGFsLWFuZC1zcGlubmVyLWpzXCIpXG4gICAgICAuaGlkZSgpXG4gICAgICAuYXBwZW5kKFxuICAgICAgICBgPGRpdiBjbGFzcz1cImlnX2xvYWRpbmctc3Bpbm5lciAgIFwiPlxuPC9kaXY+YFxuICAgICAgKS5mYWRlSW4oMjAwKTtcbiAgICAkKHRoaXMpLmFkZENsYXNzKFwic29ydC1ieS1vcHRpb25zX19saW5rLS1hY3RpdmVcIik7XG4gICAgY29uc3QgdmVudWVJRCA9ICQodGhpcykuZGF0YShcInZlbnVlLWlkXCIpO1xuICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXJIZWlnaHQgPSBwcmVBamF4U2V0dXAoJy5hamF4LWpzLWNoYW5nZS1ldmVudHMtdGFyZ2V0Jyk7XG4gICAgJCgnLnBhZ2UtdXBjb21pbmctY29uY2VydHMnKS5jc3MoJ21pbi1oZWlnaHQnLCBjdXJyZW50Q29udGFpbmVySGVpZ2h0KTtcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6IHdwQWpheC5hamF4VXJsLFxuICAgICAgZGF0YTogeyBhY3Rpb246IFwiZmlsdGVyXCIsIHZlbnVlSUQ6IHZlbnVlSUQgfSxcbiAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikuZmFkZU91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFuaW1hdGVBamF4KFxuICAgICAgICAgIFwiLmFqYXgtanMtY2hhbmdlLWV2ZW50cy10YXJnZXRcIixcbiAgICAgICAgICBcImhpc3Rvcnktd3JhcHBlcl9fb24tc2NyZWVuXCIsXG4gICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29mZi1zY3JlZW5cIixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgICcucGFnZS11cGNvbWluZy1jb25jZXJ0cydcbiAgICAgICAgICBcbiAgICAgICAgKTtcblxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gICQoXCIuc2hvdy1hbGwtY29uY2VydHMtanMtYWpheFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoXCIuanMtaGlkZS1kaXYtb24tYWpheFwiKS5oaWRlKCk7XG4gICAgaWYgKCQoXCIuc29ydC1ieS1vcHRpb25zX19saW5rXCIpLmhhc0NsYXNzKFwic29ydC1ieS1vcHRpb25zX19saW5rLS1hY3RpdmVcIikpIHtcbiAgICAgICQoXCIuc29ydC1ieS1vcHRpb25zX19saW5rXCIpLnJlbW92ZUNsYXNzKFwic29ydC1ieS1vcHRpb25zX19saW5rLS1hY3RpdmVcIik7XG4gICAgfVxuICAgIGlmICgkKFwiLnNvcnQtYnktdG9nZ2xlclwiKS5oYXNDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpKSB7XG4gICAgICAkKFwiLnNvcnQtYnktdG9nZ2xlclwiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpO1xuICAgIH1cbiAgICBpZiAoJChcIi5zb3J0LWJ5LXZlbnVlXCIpLmhhc0NsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIikpIHtcbiAgICAgICQoXCIuc29ydC1ieS12ZW51ZVwiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktbWVudS0tb24tc2NyZWVuXCIpO1xuICAgICAgJChcIi5zb3J0LWJ5LXZlbnVlXCIpLmFkZENsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpO1xuICAgIH1cbiAgICBpZiAoJChcIi5zb3J0LWJ5LWRhdGVcIikuaGFzQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKSkge1xuICAgICAgJChcIi5zb3J0LWJ5LWRhdGVcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcbiAgICAgICQoXCIuc29ydC1ieS1kYXRlXCIpLmFkZENsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpO1xuICAgIH1cbiAgICAkKFwiLnNob3ctYWxsLWNvbmNlcnRzLWpzLWFqYXhcIikuYWRkQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcblxuICAgICQoXCIudGFyZ2V0LWRpdi1mb3ItbW9kYWwtYW5kLXNwaW5uZXItanNcIilcbiAgICAuaGlkZSgpXG4gICAgLmFwcGVuZChcbiAgICAgIGA8ZGl2IGNsYXNzPVwiaWdfbG9hZGluZy1zcGlubmVyICAgXCI+XG48L2Rpdj5gXG4gICAgKS5mYWRlSW4oMjAwKTtcblxuICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXJIZWlnaHQgPSBwcmVBamF4U2V0dXAoJy5hamF4LWpzLWNoYW5nZS1ldmVudHMtdGFyZ2V0Jyk7XG4gICAgJCgnLnBhZ2UtdXBjb21pbmctY29uY2VydHMnKS5jc3MoJ21pbi1oZWlnaHQnLCBjdXJyZW50Q29udGFpbmVySGVpZ2h0KTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB3cEFqYXguYWpheFVybCxcbiAgICAgIGRhdGE6IHsgYWN0aW9uOiBcImZpbHRlclwiLCB2ZW51ZUlEOiBudWxsIH0sXG4gICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGFuaW1hdGVBamF4KFxuICAgICAgICAgIFwiLmFqYXgtanMtY2hhbmdlLWV2ZW50cy10YXJnZXRcIixcbiAgICAgICAgICBcImhpc3Rvcnktd3JhcHBlcl9fb24tc2NyZWVuXCIsXG4gICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29mZi1zY3JlZW5cIixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgICcucGFnZS11cGNvbWluZy1jb25jZXJ0cydcbiAgICAgICAgKTtcbiAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikuZmFkZU91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikucmVtb3ZlKCk7XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgYW5pbWF0ZUFqYXggPSAoXG4gICAgdGFyZ2V0RGl2LFxuICAgIGFuaW1hdGlvbkNsYXNzT24sXG4gICAgYW5pbWF0aW9uQ2xhc3NPZmYsXG4gICAgZGF0YSxcbiAgICByZW1vdmVNaW5IZWlnaHRUYXJnZXRcbiAgKSA9PiB7XG4gICAgaWYgKCQodGFyZ2V0RGl2KS5oYXNDbGFzcyhhbmltYXRpb25DbGFzc09uKSkge1xuICAgICAgJCh0YXJnZXREaXYpLnJlbW92ZUNsYXNzKGFuaW1hdGlvbkNsYXNzT24pO1xuICAgICAgXG4gICAgfVxuICAgICQodGFyZ2V0RGl2KS5hZGRDbGFzcyhhbmltYXRpb25DbGFzc09mZik7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkKHRhcmdldERpdikuaHRtbChkYXRhKTtcblxuICAgICAgJCh0YXJnZXREaXYpLnJlbW92ZUNsYXNzKGFuaW1hdGlvbkNsYXNzT2ZmKTtcbiAgICAgICQodGFyZ2V0RGl2KS5hZGRDbGFzcyhhbmltYXRpb25DbGFzc09uKTtcbiAgICAkKHJlbW92ZU1pbkhlaWdodFRhcmdldCkuY3NzKCdtaW4taGVpZ2h0JywgJ2F1dG8nKTtcblxuICAgIH0sIDUwMCk7XG4gIH07XG5cbiAgJChcIi5zb3J0LWJ5LWRhdGUtanMtYWpheFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoXCIuanMtaGlkZS1kaXYtb24tYWpheFwiKS5oaWRlKCk7XG4gICAgY29uc3QgZGF0ZWNob2ljZSA9ICQodGhpcykuZGF0YShcImNvbmNlcnQtZGF0ZVwiKTtcbiAgXG5cbiAgICAkKFwiLnRhcmdldC1kaXYtZm9yLW1vZGFsLWFuZC1zcGlubmVyLWpzXCIpXG4gICAgLmhpZGUoKVxuICAgIC5hcHBlbmQoXG4gICAgICBgPGRpdiBjbGFzcz1cImlnX2xvYWRpbmctc3Bpbm5lciAgIFwiPlxuPC9kaXY+YFxuICAgICkuZmFkZUluKDIwMCk7XG5cbiAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySGVpZ2h0ID0gcHJlQWpheFNldHVwKCcuYWpheC1qcy1jaGFuZ2UtZXZlbnRzLXRhcmdldCcpO1xuICAgICQoJy5wYWdlLXVwY29taW5nLWNvbmNlcnRzJykuY3NzKCdtaW4taGVpZ2h0JywgY3VycmVudENvbnRhaW5lckhlaWdodCk7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB3cEFqYXguYWpheFVybCxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgYWN0aW9uOiBcImZpbHRlclwiLFxuICAgICAgICB2ZW51ZUlEOiBcIm5vbi12ZW51ZS1jaG9pY2VcIixcbiAgICAgICAgZGF0ZWNob2ljZTogZGF0ZWNob2ljZSxcbiAgICAgICAgZGF0ZUZyb21BamF4OiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgYW5pbWF0ZUFqYXgoXG4gICAgICAgICAgXCIuYWpheC1qcy1jaGFuZ2UtZXZlbnRzLXRhcmdldFwiLFxuICAgICAgICAgIFwiaGlzdG9yeS13cmFwcGVyX19vbi1zY3JlZW5cIixcbiAgICAgICAgICBcImhpc3Rvcnktd3JhcHBlcl9fb2ZmLXNjcmVlblwiLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgJy5wYWdlLXVwY29taW5nLWNvbmNlcnRzJ1xuICAgICAgICApO1xuICAgICAgICAkKFwiLmlnX2xvYWRpbmctc3Bpbm5lclwiKS5mYWRlT3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKFwiLmlnX2xvYWRpbmctc3Bpbm5lclwiKS5yZW1vdmUoKTtcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0hJU1RPUlkgQUpBWCA9IEdFVCBTUEVDSUZJRUQgWUVBUiBTVEFUUywgQVJUSVNUUyBBTkQgR0FMTEVSWVxuXG4gICQoXCIuZmVzdGl2YWwteWVhci10b2dnbGVyLWpzLWFqYXhcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmZXN0aXZhbFF1ZXJ5WWVhciA9ICQodGhpcykuZGF0YShcImZlc3RpdmFsLXllYXJcIik7XG4gICAgJChcIi5leHRyYS15ZWFyLWluZm8tanNcIikudGV4dChmZXN0aXZhbFF1ZXJ5WWVhcik7XG4gICAgaWYgKFxuICAgICAgJChcIi5mZXN0aXZhbC15ZWFyLXRvZ2dsZXItanMtYWpheFwiKS5oYXNDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpXG4gICAgKSB7XG4gICAgICAkKFwiLmZlc3RpdmFsLXllYXItdG9nZ2xlci1qcy1hamF4XCIpLnJlbW92ZUNsYXNzKFxuICAgICAgICBcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCJcbiAgICAgICk7XG4gICAgfVxuICAgICQodGhpcykuYWRkQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcblxuXG5cbiAgICAkKFwiLnRhcmdldC1kaXYtZm9yLW1vZGFsLWFuZC1zcGlubmVyLWpzXCIpXG4gICAgLmhpZGUoKVxuICAgIC5hcHBlbmQoXG4gICAgICBgPGRpdiBjbGFzcz1cImlnX2xvYWRpbmctc3Bpbm5lciAgIFwiPlxuPC9kaXY+YFxuICAgICkuZmFkZUluKDIwMCk7XG5cbiAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySGVpZ2h0ID0gcHJlQWpheFNldHVwKCcuaGlzdG9yeS13cmFwcGVyJyk7XG4gICAgJCgnLmN1cnJlbnQteWVhci1hcnRpc3RzX19oaXN0b3J5JykuY3NzKCdtaW4taGVpZ2h0JywgY3VycmVudENvbnRhaW5lckhlaWdodCk7XG4gICAgXG4gICAgXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogd3BBamF4LmFqYXhVcmwsXG4gICAgICBkYXRhOiB7IGFjdGlvbjogXCJnZXRIaXN0b3J5XCIsIGZlc3RpdmFsUXVlcnlZZWFyIH0sXG4gICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmICgkKFwiLmhpc3Rvcnktd3JhcHBlclwiKS5odG1sKCkgIT09IGRhdGEpIHtcbiAgICAgICAgICBhbmltYXRlQWpheChcbiAgICAgICAgICAgIFwiLmhpc3Rvcnktd3JhcHBlclwiLFxuICAgICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29uLXNjcmVlblwiLFxuICAgICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29mZi1zY3JlZW5cIixcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAnLmN1cnJlbnQteWVhci1hcnRpc3RzX19oaXN0b3J5J1xuICAgICAgICAgICk7XG4gICAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikuZmFkZU91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLmlnX2xvYWRpbmctc3Bpbm5lclwiKS5yZW1vdmUoKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cblxuLy8gZ2V0IHRoZSBoZWlnaHQgb2YgdGhlIGV2ZW50cyBjb250YWluZXIgYW5kIGNoYW5nZSBpdCBvbmx5IGFmdGVyIGFqYXggaGFzIGJlZW4gZmluaXNoZWQgXG5cblxuY29uc3QgcHJlQWpheFNldHVwID0gKHRhcmdldERpdikgPT4ge1xuICBpZigkKHRhcmdldERpdikubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAkKHRhcmdldERpdikuaGVpZ2h0KCk7XG4gICAgXG4gIH1cbn1cblxuXG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==