!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(3)},,,function(e,t,n){"use strict";n.r(t);new Swiper(".swiper-container",{direction:"horizontal",loop:!0,slidesPerView:"auto",pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}});jQuery((function(e){if(e(".ig-footer-navbar").length>0&&(e(".ig-footer-navbar li.menu-item-has-children ul").removeClass("dropdown-menu"),e(".ig-footer-navbar li.menu-item-has-children ul").addClass("former-dropdown-menu")),e(".content-card__text").length>0){if(e(".application-section-1").length>0){if(e(".application-section-1").addClass("content-card__visible"),e(".application-section-1").removeClass("content-card__hidden"),e("#application-section-1").addClass("side-links__item--active"),e(window).width()<=767){var t=e(".content-card__visible").outerHeight();e(".main-footer").css("margin-top","".concat(t+30,"px"))}e(window).on("resize",(function(){if(e(window).width()<=767){var t=e(".content-card__visible").outerHeight();e(".main-footer").css("margin-top","".concat(t+30,"px"))}else e(window).width()>767&&e(".main-footer").css("margin-top","0")}))}e(".side-link--target").on("click",(function(t){t.preventDefault();var n=e(".content-card__visible").attr("data-application"),a=e(this).attr("id");e(".".concat(a)).outerHeight();if(e(".".concat(n)).removeClass("content-card__visible"),e(".".concat(n)).addClass("content-card__hidden"),e("#".concat(n)).removeClass("side-links__item--active"),e(".".concat(a)).addClass("content-card__visible"),e(window).width()<=767)e(".content-card__visible").outerHeight();e("#".concat(a)).addClass("side-links__item--active"),e(".".concat(a)).removeClass("content-card__hidden")}))}e(".content-card").hasClass("instrument-1")&&(e(".instrument-1").removeClass("content-card__hidden--reverse "),e("#instrument-1").addClass("side-links__item--active"),e(".instrument-1").addClass("content-card__visible--teachers"),e(window).on("resize",(function(){if(e(window).width()<=767){var t=e(".content-card__visible--teachers").outerHeight();e(".workshop__teachers").css("padding-bottom","".concat(t+30,"px"))}else e(window).width()>767&&e(".workshop__teachers").css("padding-bottom","0")})),e(".side-link--target-instrument").on("click",(function(t){t.preventDefault();var n=e(".workshop__teachers"),a=e(".content-card__visible--teachers").attr("data-instrument"),o=e(this).attr("id"),s=e('*[data-instrument="'.concat(o,'"]')).height();console.log(s),e(".".concat(o)).removeClass("content-card__hidden--reverse"),e(".".concat(o)).addClass("content-card__visible--teachers"),e("#".concat(o)).addClass("side-links__item--active"),e(".".concat(a)).removeClass("content-card__visible--teachers"),e(".".concat(a)).addClass("content-card__hidden--reverse"),e("#".concat(a)).removeClass("side-links__item--active"),e(window).width()<=767?n.css("padding-bottom",s+150):(n.css("padding-bottom",s-e(".side-links__list").height()),console.log("in else"))}))),e(".modal").length>0&&(e(".modal-trigger-js").on("click",(function(t){t.preventDefault();var n=e(this).attr("id");e(".modal").addClass("is-open"),e("[data-modalnum=".concat(n,"]")).removeClass("modal__hidden"),e("html").addClass("no-overflow"),e("[data-modalcontent=".concat(n,"]")).addClass("modal__content--on-screen"),setTimeout((function(){e("[data-modalcontent=".concat(n,"]")).removeClass("modal__content--off-screen")}),10)})),e(".modal__close").on("click",(function(){e(".modal__content--on-screen").addClass("modal__content--off-screen"),e(".modal__content--on-screen").removeClass("modal__content--on-screen"),setTimeout((function(){e(".modal").addClass("modal__hidden"),e("html").removeClass("no-overflow")}),500)}))),e(".modal").length>0&&e(".modal").on("click",(function(){console.log("clicked"),e(".modal").hasClass("is-open")&&e(".modal__close").triggerHandler("click")}));var n=function(t,n,a,o){e(".show-all-concerts-js-ajax").hasClass("sort-by-toggler__active")&&e(".show-all-concerts-js-ajax").removeClass("sort-by-toggler__active"),e("#ig-sort-show-all").hasClass("ig_gav-invisible")&&e("#ig-sort-show-all").removeClass("ig_gav-invisible"),e(".".concat(t)).hasClass("sort-by-menu--off-screen")&&(e(".".concat(n)).hasClass("sort-by-menu--on-screen")&&(e(".".concat(n)).removeClass("sort-by-menu--on-screen"),e(".".concat(n)).addClass("sort-by-menu--off-screen")),e("#".concat(a)).removeClass("sort-by-toggler__active"),e("#".concat(o)).addClass("sort-by-toggler__active"),e(".".concat(t)).css("display","flex"),e(".".concat(t)).removeClass("sort-by-menu--off-screen"),e(".".concat(t)).addClass("sort-by-menu--on-screen"))};e("#ig-sort-by-venue").on("click",(function(e){e.preventDefault(),n("sort-by-venue","sort-by-date","ig-sort-by-date","ig-sort-by-venue")})),e("#ig-sort-by-date").on("click",(function(e){e.preventDefault(),n("sort-by-date","sort-by-venue","ig-sort-by-venue","ig-sort-by-date")})),e(".sort-by-venue-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide(),e(".sort-by-options__link").hasClass("sort-by-options__link--active")&&e(".sort-by-options__link").removeClass("sort-by-options__link--active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200),e(this).addClass("sort-by-options__link--active");var n=e(this).data("venue-id"),s=o(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",s),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:n},type:"POST",success:function(t){e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()})),a(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts")},error:function(e){console.warn(e)}})})),e(".show-all-concerts-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide(),e(".sort-by-options__link").hasClass("sort-by-options__link--active")&&e(".sort-by-options__link").removeClass("sort-by-options__link--active"),e(".sort-by-toggler").hasClass("sort-by-toggler__active")&&e(".sort-by-toggler").removeClass("sort-by-toggler__active"),e(".sort-by-venue").hasClass("sort-by-menu--on-screen")&&(e(".sort-by-venue").removeClass("sort-by-menu--on-screen"),e(".sort-by-venue").addClass("sort-by-menu--off-screen")),e(".sort-by-date").hasClass("sort-by-menu--on-screen")&&(e(".sort-by-date").removeClass("sort-by-menu--on-screen"),e(".sort-by-date").addClass("sort-by-menu--off-screen")),e(".show-all-concerts-js-ajax").addClass("sort-by-toggler__active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var n=o(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",n),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:null},type:"POST",success:function(t){a(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()}))},error:function(e){console.warn(e)}})}));var a=function(t,n,a,o,s){e(t).hasClass(n)&&e(t).removeClass(n),e(t).addClass(a),setTimeout((function(){e(t).html(o),e(t).removeClass(a),e(t).addClass(n),e(s).css("min-height","auto")}),500)};e(".sort-by-date-js-ajax").on("click",(function(t){t.preventDefault(),e(".js-hide-div-on-ajax").hide();var n=e(this).data("concert-date");e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var s=o(".ajax-js-change-events-target");e(".page-upcoming-concerts").css("min-height",s),e.ajax({url:wpAjax.ajaxUrl,data:{action:"filter",venueID:"non-venue-choice",datechoice:n,dateFromAjax:!0},type:"POST",success:function(t){a(".ajax-js-change-events-target","history-wrapper__on-screen","history-wrapper__off-screen",t,".page-upcoming-concerts"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()}))},error:function(e){console.warn(e)}})})),e(".festival-year-toggler-js-ajax").on("click",(function(t){t.preventDefault();var n=e(this).data("festival-year");e(".extra-year-info-js").text(n),e(".festival-year-toggler-js-ajax").hasClass("sort-by-toggler__active")&&e(".festival-year-toggler-js-ajax").removeClass("sort-by-toggler__active"),e(this).addClass("sort-by-toggler__active"),e(".target-div-for-modal-and-spinner-js").hide().append('<div class="ig_loading-spinner   ">\n</div>').fadeIn(200);var s=o(".history-wrapper");e(".current-year-artists__history").css("min-height",s),e.ajax({url:wpAjax.ajaxUrl,data:{action:"getHistory",festivalQueryYear:n},type:"POST",success:function(t){e(".history-wrapper").html()!==t&&(a(".history-wrapper","history-wrapper__on-screen","history-wrapper__off-screen",t,".current-year-artists__history"),e(".ig_loading-spinner").fadeOut((function(){e(".ig_loading-spinner").remove()})))},error:function(e){console.warn(e)}})}));var o=function(t){if(e(t).length>0)return e(t).height()};e("p:has(iframe)")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2pzLXBhcnRpYWxzL3N3aXBlci1jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTd2lwZXIiLCJkaXJlY3Rpb24iLCJsb29wIiwic2xpZGVzUGVyVmlldyIsInBhZ2luYXRpb24iLCJlbCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzY3JvbGxiYXIiLCJqUXVlcnkiLCIkIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIndpbmRvdyIsIndpZHRoIiwiY3VycmVudEJveEhlaWdodCIsIm91dGVySGVpZ2h0IiwiY3NzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJhY3RpdmVDbGFzcyIsImF0dHIiLCJ0YXJnZXRDbGFzcyIsInRoaXMiLCJoYXNDbGFzcyIsImNoYW5nZUhlaWdodE9mRWxsZW1lbnRPbkNoYW5nZU9mQ2FyZFRhcmdldCIsIm5leHREaXZIZWlnaHQiLCJoZWlnaHQiLCJjb25zb2xlIiwibG9nIiwibW9kYWxUYXJnZXQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlckhhbmRsZXIiLCJ0b2dnbGVTb3J0T3B0aW9ucyIsInNob3dUb2dnbGVOYW1lIiwiaGlkZVRvZ2dsZU5hbWUiLCJvcHBvc2l0ZVRvZ2dsZXJJZCIsInRoaXNUb2dnbGVJZCIsImhpZGUiLCJhcHBlbmQiLCJmYWRlSW4iLCJ2ZW51ZUlEIiwiZGF0YSIsImN1cnJlbnRDb250YWluZXJIZWlnaHQiLCJwcmVBamF4U2V0dXAiLCJhamF4IiwidXJsIiwid3BBamF4IiwiYWpheFVybCIsImFjdGlvbiIsInR5cGUiLCJzdWNjZXNzIiwiZmFkZU91dCIsInJlbW92ZSIsImFuaW1hdGVBamF4IiwiZXJyb3IiLCJ3YXJuIiwidGFyZ2V0RGl2IiwiYW5pbWF0aW9uQ2xhc3NPbiIsImFuaW1hdGlvbkNsYXNzT2ZmIiwicmVtb3ZlTWluSGVpZ2h0VGFyZ2V0IiwiaHRtbCIsImRhdGVjaG9pY2UiLCJkYXRlRnJvbUFqYXgiLCJmZXN0aXZhbFF1ZXJ5WWVhciIsInRleHQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsd0VDakY3QixJQUFJQyxPQUFPLG9CQUFxQixDQUVwREMsVUFBVyxhQUNYQyxNQUFNLEVBQ05DLGNBQWUsT0FHZkMsV0FBWSxDQUNWQyxHQUFJLHNCQUlOQyxXQUFZLENBQ1ZDLE9BQVEsc0JBQ1JDLE9BQVEsdUJBSVZDLFVBQVcsQ0FDVEosR0FBSSx1QkNoQlZLLFFBQU8sU0FBVUMsR0FrQmYsR0FaSUEsRUFBRSxxQkFBcUJDLE9BQVMsSUFFbENELEVBQUUsa0RBQWtERSxZQUNsRCxpQkFFRkYsRUFBRSxrREFBa0RHLFNBQ2xELHlCQU1BSCxFQUFFLHVCQUF1QkMsT0FBUyxFQUFHLENBQ3ZDLEdBQUlELEVBQUUsMEJBQTBCQyxPQUFTLEVBQUcsQ0FLMUMsR0FKQUQsRUFBRSwwQkFBMEJHLFNBQVMseUJBQ3JDSCxFQUFFLDBCQUEwQkUsWUFBWSx3QkFDeENGLEVBQUUsMEJBQTBCRyxTQUFTLDRCQUVqQ0gsRUFBRUksUUFBUUMsU0F2QkEsSUF1QnNCLENBQ2xDLElBQU1DLEVBQW1CTixFQUFFLDBCQUEwQk8sY0FDckRQLEVBQUUsZ0JBQWdCUSxJQUFJLGFBQXRCLFVBQXVDRixFQUFtQixHQUExRCxPQUVGTixFQUFFSSxRQUFRSyxHQUFHLFVBQVUsV0FDckIsR0FBSVQsRUFBRUksUUFBUUMsU0E1QkYsSUE0QndCLENBQ2xDLElBQU1DLEVBQW1CTixFQUFFLDBCQUEwQk8sY0FFckRQLEVBQUUsZ0JBQWdCUSxJQUFJLGFBQXRCLFVBQXVDRixFQUFtQixHQUExRCxZQUNTTixFQUFFSSxRQUFRQyxRQWhDVCxLQWlDVkwsRUFBRSxnQkFBZ0JRLElBQUksYUFBdEIsUUFLTlIsRUFBRSxzQkFBc0JTLEdBQUcsU0FBUyxTQUFVQyxHQUM1Q0EsRUFBRUMsaUJBRUYsSUFBTUMsRUFBY1osRUFBRSwwQkFBMEJhLEtBQUssb0JBQy9DQyxFQUFjZCxFQUFFZSxNQUFNRixLQUFLLE1BQ1JiLEVBQUUsSUFBRCxPQUFLYyxJQUFlUCxjQVU5QyxHQU5BUCxFQUFFLElBQUQsT0FBS1ksSUFBZVYsWUFBWSx5QkFDakNGLEVBQUUsSUFBRCxPQUFLWSxJQUFlVCxTQUFTLHdCQUM5QkgsRUFBRSxJQUFELE9BQUtZLElBQWVWLFlBQVksNEJBRWpDRixFQUFFLElBQUQsT0FBS2MsSUFBZVgsU0FBUyx5QkFFMUJILEVBQUVJLFFBQVFDLFNBckRBLElBc0RhTCxFQUFFLDBCQUEwQk8sY0FHdkRQLEVBQUUsSUFBRCxPQUFLYyxJQUFlWCxTQUFTLDRCQUU5QkgsRUFBRSxJQUFELE9BQUtjLElBQWVaLFlBQVksMkJBTWpDRixFQUFFLGlCQUFpQmdCLFNBQVMsa0JBQzlCaEIsRUFBRSxpQkFBaUJFLFlBQVksa0NBQy9CRixFQUFFLGlCQUFpQkcsU0FBUyw0QkFDNUJILEVBQUUsaUJBQWlCRyxTQUFTLG1DQVc1QkgsRUFBRUksUUFBUUssR0FBRyxVQUFVLFdBQ3JCLEdBQUlULEVBQUVJLFFBQVFDLFNBaEZBLElBZ0ZzQixDQUNsQyxJQUFNQyxFQUFtQk4sRUFDdkIsb0NBQ0FPLGNBRUZQLEVBQUUsdUJBQXVCUSxJQUN2QixpQkFERixVQUVLRixFQUFtQixHQUZ4QixZQUlTTixFQUFFSSxRQUFRQyxRQXpGUCxLQTBGWkwsRUFBRSx1QkFBdUJRLElBQUksaUJBQTdCLFFBSUpSLEVBQUUsaUNBQWlDUyxHQUFHLFNBQVMsU0FBVUMsR0FDdkRBLEVBQUVDLGlCQUNGLElBQU1NLEVBQTZDakIsRUFBRSx1QkFDL0NZLEVBQWNaLEVBQUUsb0NBQW9DYSxLQUN4RCxtQkFJSUMsRUFBY2QsRUFBRWUsTUFBTUYsS0FBSyxNQUczQkssRUFEVWxCLEVBQUUsc0JBQUQsT0FBdUJjLEVBQXZCLE9BQ2FLLFNBQzlCQyxRQUFRQyxJQUFJSCxHQUVabEIsRUFBRSxJQUFELE9BQUtjLElBQWVaLFlBQVksaUNBQ2pDRixFQUFFLElBQUQsT0FBS2MsSUFBZVgsU0FBUyxtQ0FDOUJILEVBQUUsSUFBRCxPQUFLYyxJQUFlWCxTQUFTLDRCQUM5QkgsRUFBRSxJQUFELE9BQUtZLElBQWVWLFlBQVksbUNBQ2pDRixFQUFFLElBQUQsT0FBS1ksSUFBZVQsU0FBUyxpQ0FDOUJILEVBQUUsSUFBRCxPQUFLWSxJQUFlVixZQUFZLDRCQVU3QkYsRUFBRUksUUFBUUMsU0EzSEEsSUE0SFpZLEVBQTJDVCxJQUFJLGlCQUFrQlUsRUFBZ0IsTUFHakZELEVBQTJDVCxJQUFJLGlCQUFrQlUsRUFBZ0JsQixFQUFFLHFCQUFxQm1CLFVBRWhIQyxRQUFRQyxJQUFJLGdCQVNOckIsRUFBRSxVQUFVQyxPQUFTLElBQ3ZCRCxFQUFFLHFCQUFxQlMsR0FBRyxTQUFTLFNBQVVDLEdBQzNDQSxFQUFFQyxpQkFJRixJQUFNVyxFQUFjdEIsRUFBRWUsTUFBTUYsS0FBSyxNQUNqQ2IsRUFBRSxVQUFVRyxTQUFTLFdBQ3JCSCxFQUFFLGtCQUFELE9BQW1Cc0IsRUFBbkIsTUFBbUNwQixZQUFZLGlCQUNoREYsRUFBRSxRQUFRRyxTQUFTLGVBQ25CSCxFQUFFLHNCQUFELE9BQXVCc0IsRUFBdkIsTUFBdUNuQixTQUN0Qyw2QkFHRm9CLFlBQVcsV0FDVHZCLEVBQUUsc0JBQUQsT0FBdUJzQixFQUF2QixNQUF1Q3BCLFlBQ3RDLGdDQUVELE9BRUxGLEVBQUUsaUJBQWlCUyxHQUFHLFNBQVMsV0FDN0JULEVBQUUsOEJBQThCRyxTQUFTLDhCQUN6Q0gsRUFBRSw4QkFBOEJFLFlBQVksNkJBQzVDcUIsWUFBVyxXQUNUdkIsRUFBRSxVQUFVRyxTQUFTLGlCQUNyQkgsRUFBRSxRQUFRRSxZQUFZLGlCQUNyQixTQUlIRixFQUFFLFVBQVVDLE9BQVMsR0FDdkJELEVBQUUsVUFBVVMsR0FBRyxTQUFTLFdBQ3RCVyxRQUFRQyxJQUFJLFdBQ1JyQixFQUFFLFVBQVVnQixTQUFTLFlBQ3ZCaEIsRUFBRSxpQkFBaUJ3QixlQUFlLFlBcUJ4QyxJQUFNQyxFQUFvQixTQUN4QkMsRUFDQUMsRUFDQUMsRUFDQUMsR0FFSTdCLEVBQUUsOEJBQThCZ0IsU0FBUyw0QkFDM0NoQixFQUFFLDhCQUE4QkUsWUFBWSwyQkFHMUNGLEVBQUUscUJBQXFCZ0IsU0FBUyxxQkFDbENoQixFQUFFLHFCQUFxQkUsWUFBWSxvQkFHakNGLEVBQUUsSUFBRCxPQUFLMEIsSUFBa0JWLFNBQVMsOEJBQy9CaEIsRUFBRSxJQUFELE9BQUsyQixJQUFrQlgsU0FBUyw2QkFDbkNoQixFQUFFLElBQUQsT0FBSzJCLElBQWtCekIsWUFBWSwyQkFDcENGLEVBQUUsSUFBRCxPQUFLMkIsSUFBa0J4QixTQUFTLDZCQUluQ0gsRUFBRSxJQUFELE9BQUs0QixJQUFxQjFCLFlBQVksMkJBRXZDRixFQUFFLElBQUQsT0FBSzZCLElBQWdCMUIsU0FBUywyQkFHL0JILEVBQUUsSUFBRCxPQUFLMEIsSUFBa0JsQixJQUFJLFVBQVcsUUFDdkNSLEVBQUUsSUFBRCxPQUFLMEIsSUFBa0J4QixZQUFZLDRCQUNwQ0YsRUFBRSxJQUFELE9BQUswQixJQUFrQnZCLFNBQVMsNkJBTXJDSCxFQUFFLHFCQUFxQlMsR0FBRyxTQUFTLFNBQVVDLEdBQzNDQSxFQUFFQyxpQkFDRmMsRUFDRSxnQkFDQSxlQUNBLGtCQUNBLHVCQUdKekIsRUFBRSxvQkFBb0JTLEdBQUcsU0FBUyxTQUFVQyxHQUMxQ0EsRUFBRUMsaUJBQ0ZjLEVBQ0UsZUFDQSxnQkFDQSxtQkFDQSxzQkFJSnpCLEVBQUUsMEJBQTBCUyxHQUFHLFNBQVMsU0FBVUMsR0FDaERBLEVBQUVDLGlCQUNGWCxFQUFFLHdCQUF3QjhCLE9BQ3RCOUIsRUFBRSwwQkFBMEJnQixTQUFTLGtDQUN2Q2hCLEVBQUUsMEJBQTBCRSxZQUFZLGlDQUkxQ0YsRUFBRSx3Q0FDQzhCLE9BQ0FDLE9BRkgsK0NBS0lDLE9BQU8sS0FDWGhDLEVBQUVlLE1BQU1aLFNBQVMsaUNBQ2pCLElBQU04QixFQUFVakMsRUFBRWUsTUFBTW1CLEtBQUssWUFDdkJDLEVBQXlCQyxFQUFhLGlDQUM1Q3BDLEVBQUUsMkJBQTJCUSxJQUFJLGFBQWMyQixHQUUvQ25DLEVBQUVxQyxLQUFLLENBQ0xDLElBQUtDLE9BQU9DLFFBQ1pOLEtBQU0sQ0FBRU8sT0FBUSxTQUFVUixRQUFTQSxHQUNuQ1MsS0FBTSxPQUNOQyxRQUFTLFNBQVVULEdBQ2pCbEMsRUFBRSx1QkFBdUI0QyxTQUFRLFdBQy9CNUMsRUFBRSx1QkFBdUI2QyxZQUczQkMsRUFDRSxnQ0FDQSw2QkFDQSw4QkFDQVosRUFDQSw0QkFLSmEsTUFBTyxTQUFVQSxHQUNmM0IsUUFBUTRCLEtBQUtELFNBS25CL0MsRUFBRSw4QkFBOEJTLEdBQUcsU0FBUyxTQUFVQyxHQUNwREEsRUFBRUMsaUJBQ0ZYLEVBQUUsd0JBQXdCOEIsT0FDdEI5QixFQUFFLDBCQUEwQmdCLFNBQVMsa0NBQ3ZDaEIsRUFBRSwwQkFBMEJFLFlBQVksaUNBRXRDRixFQUFFLG9CQUFvQmdCLFNBQVMsNEJBQ2pDaEIsRUFBRSxvQkFBb0JFLFlBQVksMkJBRWhDRixFQUFFLGtCQUFrQmdCLFNBQVMsNkJBQy9CaEIsRUFBRSxrQkFBa0JFLFlBQVksMkJBQ2hDRixFQUFFLGtCQUFrQkcsU0FBUyw2QkFFM0JILEVBQUUsaUJBQWlCZ0IsU0FBUyw2QkFDOUJoQixFQUFFLGlCQUFpQkUsWUFBWSwyQkFDL0JGLEVBQUUsaUJBQWlCRyxTQUFTLDZCQUU5QkgsRUFBRSw4QkFBOEJHLFNBQVMsMkJBRXpDSCxFQUFFLHdDQUNEOEIsT0FDQUMsT0FGRCwrQ0FLRUMsT0FBTyxLQUVULElBQU1HLEVBQXlCQyxFQUFhLGlDQUM1Q3BDLEVBQUUsMkJBQTJCUSxJQUFJLGFBQWMyQixHQUMvQ25DLEVBQUVxQyxLQUFLLENBQ0xDLElBQUtDLE9BQU9DLFFBQ1pOLEtBQU0sQ0FBRU8sT0FBUSxTQUFVUixRQUFTLE1BQ25DUyxLQUFNLE9BQ05DLFFBQVMsU0FBVVQsR0FDakJZLEVBQ0UsZ0NBQ0EsNkJBQ0EsOEJBQ0FaLEVBQ0EsMkJBRUZsQyxFQUFFLHVCQUF1QjRDLFNBQVEsV0FDL0I1QyxFQUFFLHVCQUF1QjZDLGFBRzdCRSxNQUFPLFNBQVVBLEdBQ2YzQixRQUFRNEIsS0FBS0QsU0FLbkIsSUFBTUQsRUFBYyxTQUNsQkcsRUFDQUMsRUFDQUMsRUFDQWpCLEVBQ0FrQixHQUVJcEQsRUFBRWlELEdBQVdqQyxTQUFTa0MsSUFDeEJsRCxFQUFFaUQsR0FBVy9DLFlBQVlnRCxHQUczQmxELEVBQUVpRCxHQUFXOUMsU0FBU2dELEdBQ3RCNUIsWUFBVyxXQUNUdkIsRUFBRWlELEdBQVdJLEtBQUtuQixHQUVsQmxDLEVBQUVpRCxHQUFXL0MsWUFBWWlELEdBQ3pCbkQsRUFBRWlELEdBQVc5QyxTQUFTK0MsR0FDeEJsRCxFQUFFb0QsR0FBdUI1QyxJQUFJLGFBQWMsVUFFeEMsTUFHTFIsRUFBRSx5QkFBeUJTLEdBQUcsU0FBUyxTQUFVQyxHQUMvQ0EsRUFBRUMsaUJBQ0ZYLEVBQUUsd0JBQXdCOEIsT0FDMUIsSUFBTXdCLEVBQWF0RCxFQUFFZSxNQUFNbUIsS0FBSyxnQkFHaENsQyxFQUFFLHdDQUNEOEIsT0FDQUMsT0FGRCwrQ0FLRUMsT0FBTyxLQUVULElBQU1HLEVBQXlCQyxFQUFhLGlDQUM1Q3BDLEVBQUUsMkJBQTJCUSxJQUFJLGFBQWMyQixHQUUvQ25DLEVBQUVxQyxLQUFLLENBQ0xDLElBQUtDLE9BQU9DLFFBQ1pOLEtBQU0sQ0FDSk8sT0FBUSxTQUNSUixRQUFTLG1CQUNUcUIsV0FBWUEsRUFDWkMsY0FBYyxHQUVoQmIsS0FBTSxPQUNOQyxRQUFTLFNBQVVULEdBQ2pCWSxFQUNFLGdDQUNBLDZCQUNBLDhCQUNBWixFQUNBLDJCQUVGbEMsRUFBRSx1QkFBdUI0QyxTQUFRLFdBQy9CNUMsRUFBRSx1QkFBdUI2QyxhQUc3QkUsTUFBTyxTQUFVQSxHQUNmM0IsUUFBUTRCLEtBQUtELFNBT25CL0MsRUFBRSxrQ0FBa0NTLEdBQUcsU0FBUyxTQUFVQyxHQUN4REEsRUFBRUMsaUJBQ0YsSUFBTTZDLEVBQW9CeEQsRUFBRWUsTUFBTW1CLEtBQUssaUJBQ3ZDbEMsRUFBRSx1QkFBdUJ5RCxLQUFLRCxHQUU1QnhELEVBQUUsa0NBQWtDZ0IsU0FBUyw0QkFFN0NoQixFQUFFLGtDQUFrQ0UsWUFDbEMsMkJBR0pGLEVBQUVlLE1BQU1aLFNBQVMsMkJBSWpCSCxFQUFFLHdDQUNEOEIsT0FDQUMsT0FGRCwrQ0FLRUMsT0FBTyxLQUVULElBQU1HLEVBQXlCQyxFQUFhLG9CQUM1Q3BDLEVBQUUsa0NBQWtDUSxJQUFJLGFBQWMyQixHQUd0RG5DLEVBQUVxQyxLQUFLLENBQ0xDLElBQUtDLE9BQU9DLFFBQ1pOLEtBQU0sQ0FBRU8sT0FBUSxhQUFjZSxxQkFDOUJkLEtBQU0sT0FDTkMsUUFBUyxTQUFVVCxHQUNibEMsRUFBRSxvQkFBb0JxRCxTQUFXbkIsSUFDbkNZLEVBQ0UsbUJBQ0EsNkJBQ0EsOEJBQ0FaLEVBQ0Esa0NBRUZsQyxFQUFFLHVCQUF1QjRDLFNBQVEsV0FDL0I1QyxFQUFFLHVCQUF1QjZDLGNBSS9CRSxNQUFPLFNBQVVBLEdBQ2YzQixRQUFRNEIsS0FBS0QsU0FTckIsSUFBTVgsRUFBZSxTQUFDYSxHQUNwQixHQUFHakQsRUFBRWlELEdBQVdoRCxPQUFTLEVBQ3ZCLE9BQU9ELEVBQUVpRCxHQUFXOUIsVUFNckJuQixFQUFFIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIgIC8vIGluaXQgU3dpcGVyOlxuICBleHBvcnQgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcihcIi5zd2lwZXItY29udGFpbmVyXCIsIHtcbiAgICAvLyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICBsb29wOiB0cnVlLFxuICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxuXG4gICAgLy8gSWYgd2UgbmVlZCBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgZWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uXCIsXG4gICAgfSxcblxuICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXG4gICAgbmF2aWdhdGlvbjoge1xuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4gICAgfSxcblxuICAgIC8vIEFuZCBpZiB3ZSBuZWVkIHNjcm9sbGJhclxuICAgIHNjcm9sbGJhcjoge1xuICAgICAgZWw6IFwiLnN3aXBlci1zY3JvbGxiYXJcIixcbiAgICB9LFxuICB9KTtcbiIsIlxuICBpbXBvcnQge3N3aXBlcn0gZnJvbSAnLi9qcy1wYXJ0aWFscy9zd2lwZXItY29uZmlnLmpzJztcblxuXG5qUXVlcnkoZnVuY3Rpb24gKCQpIHtcbiAgY29uc3QgQlBfTUVESVVNID0gNzY3O1xuXG5cbiAgLy8gb3BlbiBhbGwgdGhlIHN1Ym1lbnUgaW4gZm9vdGVyXG5cbiAgaWYgKCQoXCIuaWctZm9vdGVyLW5hdmJhclwiKS5sZW5ndGggPiAwKSB7XG4gIFxuICAgICQoXCIuaWctZm9vdGVyLW5hdmJhciBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuIHVsXCIpLnJlbW92ZUNsYXNzKFxuICAgICAgXCJkcm9wZG93bi1tZW51XCJcbiAgICApO1xuICAgICQoXCIuaWctZm9vdGVyLW5hdmJhciBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuIHVsXCIpLmFkZENsYXNzKFxuICAgICAgXCJmb3JtZXItZHJvcGRvd24tbWVudVwiXG4gICAgKTtcbiAgfVxuXG4gIC8vU2xpZGVyIGZvciB0ZXh0IGNhcmQgaW4gYXBwbGljYXRpb24gc2VjdGlvblxuXG4gIGlmICgkKFwiLmNvbnRlbnQtY2FyZF9fdGV4dFwiKS5sZW5ndGggPiAwKSB7XG4gICAgaWYgKCQoXCIuYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICQoXCIuYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmFkZENsYXNzKFwiY29udGVudC1jYXJkX192aXNpYmxlXCIpO1xuICAgICAgJChcIi5hcHBsaWNhdGlvbi1zZWN0aW9uLTFcIikucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlblwiKTtcbiAgICAgICQoXCIjYXBwbGljYXRpb24tc2VjdGlvbi0xXCIpLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuXG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gQlBfTUVESVVNKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAkKGAubWFpbi1mb290ZXJgKS5jc3MoXCJtYXJnaW4tdG9wXCIsIGAke2N1cnJlbnRCb3hIZWlnaHQgKyAzMH1weGApO1xuICAgICAgfVxuICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKS5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgICAgJChgLm1haW4tZm9vdGVyYCkuY3NzKFwibWFyZ2luLXRvcFwiLCBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMzB9cHhgKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IEJQX01FRElVTSkge1xuICAgICAgICAgICQoYC5tYWluLWZvb3RlcmApLmNzcyhcIm1hcmdpbi10b3BcIiwgYDBgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJChcIi5zaWRlLWxpbmstLXRhcmdldFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gJChcIi5jb250ZW50LWNhcmRfX3Zpc2libGVcIikuYXR0cihcImRhdGEtYXBwbGljYXRpb25cIik7XG4gICAgICBjb25zdCB0YXJnZXRDbGFzcyA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoYC4ke3RhcmdldENsYXNzfWApLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRCb3hIZWlnaHQpO1xuXG4gICAgICAkKGAuJHthY3RpdmVDbGFzc31gKS5yZW1vdmVDbGFzcyhcImNvbnRlbnQtY2FyZF9fdmlzaWJsZVwiKTtcbiAgICAgICQoYC4ke2FjdGl2ZUNsYXNzfWApLmFkZENsYXNzKFwiY29udGVudC1jYXJkX19oaWRkZW5cIik7XG4gICAgICAkKGAjJHthY3RpdmVDbGFzc31gKS5yZW1vdmVDbGFzcyhcInNpZGUtbGlua3NfX2l0ZW0tLWFjdGl2ZVwiKTtcblxuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkuYWRkQ2xhc3MoXCJjb250ZW50LWNhcmRfX3Zpc2libGVcIik7XG5cbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSBCUF9NRURJVU0pIHtcbiAgICAgICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoXCIuY29udGVudC1jYXJkX192aXNpYmxlXCIpLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIC8vICQoYC5tYWluLWZvb3RlcmApLmNzcyhcIm1hcmdpbi10b3BcIiwgYCR7Y3VycmVudEJveEhlaWdodCArIDMwfXB4YCk7XG4gICAgICB9XG4gICAgICAkKGAjJHt0YXJnZXRDbGFzc31gKS5hZGRDbGFzcyhcInNpZGUtbGlua3NfX2l0ZW0tLWFjdGl2ZVwiKTtcblxuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlblwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vU2xpZGVyIGZvciB0ZXh0IGNhcmQgaW4gdGVhY2hlcnMgc2VjdGlvbiBzZWN0aW9uXG5cbiAgaWYgKCQoXCIuY29udGVudC1jYXJkXCIpLmhhc0NsYXNzKFwiaW5zdHJ1bWVudC0xXCIpKSB7XG4gICAgJChcIi5pbnN0cnVtZW50LTFcIikucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZSBcIik7XG4gICAgJChgI2luc3RydW1lbnQtMWApLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICQoYC5pbnN0cnVtZW50LTFgKS5hZGRDbGFzcyhcImNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIik7XG4gICAgLy8gaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgIC8vICAgY29uc3QgY3VycmVudEJveEhlaWdodCA9ICQoXG4gICAgLy8gICAgIFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIlxuICAgIC8vICAgKS5vdXRlckhlaWdodCgpO1xuICAgIC8vICAgJChgLndvcmtzaG9wX190ZWFjaGVyc2ApLmNzcyhcbiAgICAvLyAgICAgXCJwYWRkaW5nLWJvdHRvbVwiLFxuICAgIC8vICAgICBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMjB9cHhgXG4gICAgLy8gICApO1xuICAgIC8vIH1cblxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gQlBfTUVESVVNKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRCb3hIZWlnaHQgPSAkKFxuICAgICAgICAgIFwiLmNvbnRlbnQtY2FyZF9fdmlzaWJsZS0tdGVhY2hlcnNcIlxuICAgICAgICApLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgJChgLndvcmtzaG9wX190ZWFjaGVyc2ApLmNzcyhcbiAgICAgICAgICBcInBhZGRpbmctYm90dG9tXCIsXG4gICAgICAgICAgYCR7Y3VycmVudEJveEhlaWdodCArIDMwfXB4YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IEJQX01FRElVTSkge1xuICAgICAgICAkKGAud29ya3Nob3BfX3RlYWNoZXJzYCkuY3NzKFwicGFkZGluZy1ib3R0b21cIiwgYDBgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoXCIuc2lkZS1saW5rLS10YXJnZXQtaW5zdHJ1bWVudFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBjaGFuZ2VIZWlnaHRPZkVsbGVtZW50T25DaGFuZ2VPZkNhcmRUYXJnZXQgPSAkKCcud29ya3Nob3BfX3RlYWNoZXJzJylcbiAgICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gJChcIi5jb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCIpLmF0dHIoXG4gICAgICAgIFwiZGF0YS1pbnN0cnVtZW50XCJcbiAgICAgICk7XG5cblxuICAgICAgY29uc3QgdGFyZ2V0Q2xhc3MgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcblxuICAgICAgY29uc3QgbmV4dERpdiA9ICQoYCpbZGF0YS1pbnN0cnVtZW50PVwiJHt0YXJnZXRDbGFzc31cIl1gKTtcbiAgICAgIGNvbnN0IG5leHREaXZIZWlnaHQgPSBuZXh0RGl2LmhlaWdodCgpO1xuICAgICAgY29uc29sZS5sb2cobmV4dERpdkhlaWdodClcblxuICAgICAgJChgLiR7dGFyZ2V0Q2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZVwiKTtcbiAgICAgICQoYC4ke3RhcmdldENsYXNzfWApLmFkZENsYXNzKFwiY29udGVudC1jYXJkX192aXNpYmxlLS10ZWFjaGVyc1wiKTtcbiAgICAgICQoYCMke3RhcmdldENsYXNzfWApLmFkZENsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICAgJChgLiR7YWN0aXZlQ2xhc3N9YCkucmVtb3ZlQ2xhc3MoXCJjb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCIpO1xuICAgICAgJChgLiR7YWN0aXZlQ2xhc3N9YCkuYWRkQ2xhc3MoXCJjb250ZW50LWNhcmRfX2hpZGRlbi0tcmV2ZXJzZVwiKTtcbiAgICAgICQoYCMke2FjdGl2ZUNsYXNzfWApLnJlbW92ZUNsYXNzKFwic2lkZS1saW5rc19faXRlbS0tYWN0aXZlXCIpO1xuICAgICAgLy8gaWYgKCQod2luZG93KS53aWR0aCgpIDw9IEJQX01FRElVTSkge1xuICAgICAgLy8gICBjb25zdCBjdXJyZW50Qm94SGVpZ2h0ID0gJChcbiAgICAgIC8vICAgICBcIi5jb250ZW50LWNhcmRfX3Zpc2libGUtLXRlYWNoZXJzXCJcbiAgICAgIC8vICAgKS5vdXRlckhlaWdodCgpO1xuICAgICAgLy8gICAkKGAud29ya3Nob3BfX3RlYWNoZXJzYCkuY3NzKFxuICAgICAgLy8gICAgIFwicGFkZGluZy1ib3R0b21cIixcbiAgICAgIC8vICAgICBgJHtjdXJyZW50Qm94SGVpZ2h0ICsgMjB9cHhgXG4gICAgICAvLyAgICk7XG4gICAgICAvLyB9XG4gICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gQlBfTUVESVVNKSB7XG4gICAgICAgIGNoYW5nZUhlaWdodE9mRWxsZW1lbnRPbkNoYW5nZU9mQ2FyZFRhcmdldC5jc3MoJ3BhZGRpbmctYm90dG9tJywgbmV4dERpdkhlaWdodCArIDE1MCk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZUhlaWdodE9mRWxsZW1lbnRPbkNoYW5nZU9mQ2FyZFRhcmdldC5jc3MoJ3BhZGRpbmctYm90dG9tJywgbmV4dERpdkhlaWdodCAtICQoJy5zaWRlLWxpbmtzX19saXN0JykuaGVpZ2h0KCkpO1xuXG5jb25zb2xlLmxvZygnaW4gZWxzZScpXG4gICAgICB9XG5cblxuICAgIH0pO1xuICB9XG5cbiAgLy9tb2RhbCBwb3B1cFxuXG4gIGlmICgkKFwiLm1vZGFsXCIpLmxlbmd0aCA+IDApIHtcbiAgICAkKFwiLm1vZGFsLXRyaWdnZXItanNcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAvL2Nhc2UgZm9yIGJhbHRpYyBkcnVtbWVycyBsZWFndWUgZmluYWxpc3RzXG5cbiAgICAgIGNvbnN0IG1vZGFsVGFyZ2V0ID0gJCh0aGlzKS5hdHRyKFwiaWRcIik7XG4gICAgICAkKFwiLm1vZGFsXCIpLmFkZENsYXNzKFwiaXMtb3BlblwiKTtcbiAgICAgICQoYFtkYXRhLW1vZGFsbnVtPSR7bW9kYWxUYXJnZXR9XWApLnJlbW92ZUNsYXNzKFwibW9kYWxfX2hpZGRlblwiKTtcbiAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwibm8tb3ZlcmZsb3dcIik7XG4gICAgICAkKGBbZGF0YS1tb2RhbGNvbnRlbnQ9JHttb2RhbFRhcmdldH1dYCkuYWRkQ2xhc3MoXG4gICAgICAgIFwibW9kYWxfX2NvbnRlbnQtLW9uLXNjcmVlblwiXG4gICAgICApO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJChgW2RhdGEtbW9kYWxjb250ZW50PSR7bW9kYWxUYXJnZXR9XWApLnJlbW92ZUNsYXNzKFxuICAgICAgICAgIFwibW9kYWxfX2NvbnRlbnQtLW9mZi1zY3JlZW5cIlxuICAgICAgICApO1xuICAgICAgfSwgMTApO1xuICAgIH0pO1xuICAgICQoXCIubW9kYWxfX2Nsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgJChcIi5tb2RhbF9fY29udGVudC0tb24tc2NyZWVuXCIpLmFkZENsYXNzKFwibW9kYWxfX2NvbnRlbnQtLW9mZi1zY3JlZW5cIik7XG4gICAgICAkKFwiLm1vZGFsX19jb250ZW50LS1vbi1zY3JlZW5cIikucmVtb3ZlQ2xhc3MoXCJtb2RhbF9fY29udGVudC0tb24tc2NyZWVuXCIpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICQoXCIubW9kYWxcIikuYWRkQ2xhc3MoXCJtb2RhbF9faGlkZGVuXCIpO1xuICAgICAgICAkKFwiaHRtbFwiKS5yZW1vdmVDbGFzcyhcIm5vLW92ZXJmbG93XCIpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICgkKFwiLm1vZGFsXCIpLmxlbmd0aCA+IDApIHtcbiAgICAkKFwiLm1vZGFsXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc29sZS5sb2coXCJjbGlja2VkXCIpO1xuICAgICAgaWYgKCQoXCIubW9kYWxcIikuaGFzQ2xhc3MoXCJpcy1vcGVuXCIpKSB7XG4gICAgICAgICQoXCIubW9kYWxfX2Nsb3NlXCIpLnRyaWdnZXJIYW5kbGVyKFwiY2xpY2tcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyAkKFwiI2lnLXNvcnQtYnktdmVudWVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAvLyAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBpZiAoJChcIi5zb3J0LWJ5LXZlbnVlXCIpLmhhc0NsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpKSB7XG5cbiAgLy8gICAgIGlmKCQoXCIjc29ydC1ieS1kYXRlXCIpLmhhc0NsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIikpIHtcbiAgLy8gICAgICAgJChcIiNzb3J0LWJ5LWRhdGVcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcbiAgLy8gICAgIH1cbiAgLy8gICAgICQoJy5zb3J0LWJ5LXZlbnVlJykuY3NzKFwiZGlzcGxheVwiLCAnZmxleCcpO1xuICAvLyAgICAgJChcIi5zb3J0LWJ5LXZlbnVlXCIpLnJlbW92ZUNsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpO1xuICAvLyAgICAgJChcIi5zb3J0LWJ5LXZlbnVlXCIpLmFkZENsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIik7XG5cbiAgLy8gICB9XG4gIC8vIH0pO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0FKQVggRklMVEVSUy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBjb25zdCB0b2dnbGVTb3J0T3B0aW9ucyA9IChcbiAgICBzaG93VG9nZ2xlTmFtZSxcbiAgICBoaWRlVG9nZ2xlTmFtZSxcbiAgICBvcHBvc2l0ZVRvZ2dsZXJJZCxcbiAgICB0aGlzVG9nZ2xlSWRcbiAgKSA9PiB7XG4gICAgaWYgKCQoXCIuc2hvdy1hbGwtY29uY2VydHMtanMtYWpheFwiKS5oYXNDbGFzcyhcInNvcnQtYnktdG9nZ2xlcl9fYWN0aXZlXCIpKSB7XG4gICAgICAkKFwiLnNob3ctYWxsLWNvbmNlcnRzLWpzLWFqYXhcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICBpZiAoJChcIiNpZy1zb3J0LXNob3ctYWxsXCIpLmhhc0NsYXNzKFwiaWdfZ2F2LWludmlzaWJsZVwiKSkge1xuICAgICAgJChcIiNpZy1zb3J0LXNob3ctYWxsXCIpLnJlbW92ZUNsYXNzKFwiaWdfZ2F2LWludmlzaWJsZVwiKTtcbiAgICB9XG5cbiAgICBpZiAoJChgLiR7c2hvd1RvZ2dsZU5hbWV9YCkuaGFzQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9mZi1zY3JlZW5cIikpIHtcbiAgICAgIGlmICgkKGAuJHtoaWRlVG9nZ2xlTmFtZX1gKS5oYXNDbGFzcyhcInNvcnQtYnktbWVudS0tb24tc2NyZWVuXCIpKSB7XG4gICAgICAgICQoYC4ke2hpZGVUb2dnbGVOYW1lfWApLnJlbW92ZUNsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIik7XG4gICAgICAgICQoYC4ke2hpZGVUb2dnbGVOYW1lfWApLmFkZENsYXNzKFwic29ydC1ieS1tZW51LS1vZmYtc2NyZWVuXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBpZigkKGAjJHtvcHBvc2l0ZVRvZ2dsZXJJZH1gKS5oYXNDbGFzcygnc29ydC1ieS10b2dnbGVyX19hY3RpdmUnKSkge1xuICAgICAgJChgIyR7b3Bwb3NpdGVUb2dnbGVySWR9YCkucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAkKGAjJHt0aGlzVG9nZ2xlSWR9YCkuYWRkQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcblxuICAgICAgLy8gfVxuICAgICAgJChgLiR7c2hvd1RvZ2dsZU5hbWV9YCkuY3NzKFwiZGlzcGxheVwiLCBcImZsZXhcIik7XG4gICAgICAkKGAuJHtzaG93VG9nZ2xlTmFtZX1gKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktbWVudS0tb2ZmLXNjcmVlblwiKTtcbiAgICAgICQoYC4ke3Nob3dUb2dnbGVOYW1lfWApLmFkZENsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIik7XG4gICAgfVxuICB9O1xuXG5cblxuICAkKFwiI2lnLXNvcnQtYnktdmVudWVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0b2dnbGVTb3J0T3B0aW9ucyhcbiAgICAgIFwic29ydC1ieS12ZW51ZVwiLFxuICAgICAgXCJzb3J0LWJ5LWRhdGVcIixcbiAgICAgIFwiaWctc29ydC1ieS1kYXRlXCIsXG4gICAgICBcImlnLXNvcnQtYnktdmVudWVcIlxuICAgICk7XG4gIH0pO1xuICAkKFwiI2lnLXNvcnQtYnktZGF0ZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRvZ2dsZVNvcnRPcHRpb25zKFxuICAgICAgXCJzb3J0LWJ5LWRhdGVcIixcbiAgICAgIFwic29ydC1ieS12ZW51ZVwiLFxuICAgICAgXCJpZy1zb3J0LWJ5LXZlbnVlXCIsXG4gICAgICBcImlnLXNvcnQtYnktZGF0ZVwiXG4gICAgKTtcbiAgfSk7XG5cbiAgJChcIi5zb3J0LWJ5LXZlbnVlLWpzLWFqYXhcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKFwiLmpzLWhpZGUtZGl2LW9uLWFqYXhcIikuaGlkZSgpO1xuICAgIGlmICgkKFwiLnNvcnQtYnktb3B0aW9uc19fbGlua1wiKS5oYXNDbGFzcyhcInNvcnQtYnktb3B0aW9uc19fbGluay0tYWN0aXZlXCIpKSB7XG4gICAgICAkKFwiLnNvcnQtYnktb3B0aW9uc19fbGlua1wiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktb3B0aW9uc19fbGluay0tYWN0aXZlXCIpO1xuICAgIH1cblxuXG4gICAgJChcIi50YXJnZXQtZGl2LWZvci1tb2RhbC1hbmQtc3Bpbm5lci1qc1wiKVxuICAgICAgLmhpZGUoKVxuICAgICAgLmFwcGVuZChcbiAgICAgICAgYDxkaXYgY2xhc3M9XCJpZ19sb2FkaW5nLXNwaW5uZXIgICBcIj5cbjwvZGl2PmBcbiAgICAgICkuZmFkZUluKDIwMCk7XG4gICAgJCh0aGlzKS5hZGRDbGFzcyhcInNvcnQtYnktb3B0aW9uc19fbGluay0tYWN0aXZlXCIpO1xuICAgIGNvbnN0IHZlbnVlSUQgPSAkKHRoaXMpLmRhdGEoXCJ2ZW51ZS1pZFwiKTtcbiAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySGVpZ2h0ID0gcHJlQWpheFNldHVwKCcuYWpheC1qcy1jaGFuZ2UtZXZlbnRzLXRhcmdldCcpO1xuICAgICQoJy5wYWdlLXVwY29taW5nLWNvbmNlcnRzJykuY3NzKCdtaW4taGVpZ2h0JywgY3VycmVudENvbnRhaW5lckhlaWdodCk7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB3cEFqYXguYWpheFVybCxcbiAgICAgIGRhdGE6IHsgYWN0aW9uOiBcImZpbHRlclwiLCB2ZW51ZUlEOiB2ZW51ZUlEIH0sXG4gICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICQoXCIuaWdfbG9hZGluZy1zcGlubmVyXCIpLmZhZGVPdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoXCIuaWdfbG9hZGluZy1zcGlubmVyXCIpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhbmltYXRlQWpheChcbiAgICAgICAgICBcIi5hamF4LWpzLWNoYW5nZS1ldmVudHMtdGFyZ2V0XCIsXG4gICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29uLXNjcmVlblwiLFxuICAgICAgICAgIFwiaGlzdG9yeS13cmFwcGVyX19vZmYtc2NyZWVuXCIsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICAnLnBhZ2UtdXBjb21pbmctY29uY2VydHMnXG4gICAgICAgICAgXG4gICAgICAgICk7XG5cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICAkKFwiLnNob3ctYWxsLWNvbmNlcnRzLWpzLWFqYXhcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKFwiLmpzLWhpZGUtZGl2LW9uLWFqYXhcIikuaGlkZSgpO1xuICAgIGlmICgkKFwiLnNvcnQtYnktb3B0aW9uc19fbGlua1wiKS5oYXNDbGFzcyhcInNvcnQtYnktb3B0aW9uc19fbGluay0tYWN0aXZlXCIpKSB7XG4gICAgICAkKFwiLnNvcnQtYnktb3B0aW9uc19fbGlua1wiKS5yZW1vdmVDbGFzcyhcInNvcnQtYnktb3B0aW9uc19fbGluay0tYWN0aXZlXCIpO1xuICAgIH1cbiAgICBpZiAoJChcIi5zb3J0LWJ5LXRvZ2dsZXJcIikuaGFzQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKSkge1xuICAgICAgJChcIi5zb3J0LWJ5LXRvZ2dsZXJcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgaWYgKCQoXCIuc29ydC1ieS12ZW51ZVwiKS5oYXNDbGFzcyhcInNvcnQtYnktbWVudS0tb24tc2NyZWVuXCIpKSB7XG4gICAgICAkKFwiLnNvcnQtYnktdmVudWVcIikucmVtb3ZlQ2xhc3MoXCJzb3J0LWJ5LW1lbnUtLW9uLXNjcmVlblwiKTtcbiAgICAgICQoXCIuc29ydC1ieS12ZW51ZVwiKS5hZGRDbGFzcyhcInNvcnQtYnktbWVudS0tb2ZmLXNjcmVlblwiKTtcbiAgICB9XG4gICAgaWYgKCQoXCIuc29ydC1ieS1kYXRlXCIpLmhhc0NsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIikpIHtcbiAgICAgICQoXCIuc29ydC1ieS1kYXRlXCIpLnJlbW92ZUNsYXNzKFwic29ydC1ieS1tZW51LS1vbi1zY3JlZW5cIik7XG4gICAgICAkKFwiLnNvcnQtYnktZGF0ZVwiKS5hZGRDbGFzcyhcInNvcnQtYnktbWVudS0tb2ZmLXNjcmVlblwiKTtcbiAgICB9XG4gICAgJChcIi5zaG93LWFsbC1jb25jZXJ0cy1qcy1hamF4XCIpLmFkZENsYXNzKFwic29ydC1ieS10b2dnbGVyX19hY3RpdmVcIik7XG5cbiAgICAkKFwiLnRhcmdldC1kaXYtZm9yLW1vZGFsLWFuZC1zcGlubmVyLWpzXCIpXG4gICAgLmhpZGUoKVxuICAgIC5hcHBlbmQoXG4gICAgICBgPGRpdiBjbGFzcz1cImlnX2xvYWRpbmctc3Bpbm5lciAgIFwiPlxuPC9kaXY+YFxuICAgICkuZmFkZUluKDIwMCk7XG5cbiAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySGVpZ2h0ID0gcHJlQWpheFNldHVwKCcuYWpheC1qcy1jaGFuZ2UtZXZlbnRzLXRhcmdldCcpO1xuICAgICQoJy5wYWdlLXVwY29taW5nLWNvbmNlcnRzJykuY3NzKCdtaW4taGVpZ2h0JywgY3VycmVudENvbnRhaW5lckhlaWdodCk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogd3BBamF4LmFqYXhVcmwsXG4gICAgICBkYXRhOiB7IGFjdGlvbjogXCJmaWx0ZXJcIiwgdmVudWVJRDogbnVsbCB9LFxuICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBhbmltYXRlQWpheChcbiAgICAgICAgICBcIi5hamF4LWpzLWNoYW5nZS1ldmVudHMtdGFyZ2V0XCIsXG4gICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29uLXNjcmVlblwiLFxuICAgICAgICAgIFwiaGlzdG9yeS13cmFwcGVyX19vZmYtc2NyZWVuXCIsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICAnLnBhZ2UtdXBjb21pbmctY29uY2VydHMnXG4gICAgICAgICk7XG4gICAgICAgICQoXCIuaWdfbG9hZGluZy1zcGlubmVyXCIpLmZhZGVPdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoXCIuaWdfbG9hZGluZy1zcGlubmVyXCIpLnJlbW92ZSgpO1xuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGFuaW1hdGVBamF4ID0gKFxuICAgIHRhcmdldERpdixcbiAgICBhbmltYXRpb25DbGFzc09uLFxuICAgIGFuaW1hdGlvbkNsYXNzT2ZmLFxuICAgIGRhdGEsXG4gICAgcmVtb3ZlTWluSGVpZ2h0VGFyZ2V0XG4gICkgPT4ge1xuICAgIGlmICgkKHRhcmdldERpdikuaGFzQ2xhc3MoYW5pbWF0aW9uQ2xhc3NPbikpIHtcbiAgICAgICQodGFyZ2V0RGl2KS5yZW1vdmVDbGFzcyhhbmltYXRpb25DbGFzc09uKTtcbiAgICAgIFxuICAgIH1cbiAgICAkKHRhcmdldERpdikuYWRkQ2xhc3MoYW5pbWF0aW9uQ2xhc3NPZmYpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJCh0YXJnZXREaXYpLmh0bWwoZGF0YSk7XG5cbiAgICAgICQodGFyZ2V0RGl2KS5yZW1vdmVDbGFzcyhhbmltYXRpb25DbGFzc09mZik7XG4gICAgICAkKHRhcmdldERpdikuYWRkQ2xhc3MoYW5pbWF0aW9uQ2xhc3NPbik7XG4gICAgJChyZW1vdmVNaW5IZWlnaHRUYXJnZXQpLmNzcygnbWluLWhlaWdodCcsICdhdXRvJyk7XG5cbiAgICB9LCA1MDApO1xuICB9O1xuXG4gICQoXCIuc29ydC1ieS1kYXRlLWpzLWFqYXhcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKFwiLmpzLWhpZGUtZGl2LW9uLWFqYXhcIikuaGlkZSgpO1xuICAgIGNvbnN0IGRhdGVjaG9pY2UgPSAkKHRoaXMpLmRhdGEoXCJjb25jZXJ0LWRhdGVcIik7XG4gIFxuXG4gICAgJChcIi50YXJnZXQtZGl2LWZvci1tb2RhbC1hbmQtc3Bpbm5lci1qc1wiKVxuICAgIC5oaWRlKClcbiAgICAuYXBwZW5kKFxuICAgICAgYDxkaXYgY2xhc3M9XCJpZ19sb2FkaW5nLXNwaW5uZXIgICBcIj5cbjwvZGl2PmBcbiAgICApLmZhZGVJbigyMDApO1xuXG4gICAgY29uc3QgY3VycmVudENvbnRhaW5lckhlaWdodCA9IHByZUFqYXhTZXR1cCgnLmFqYXgtanMtY2hhbmdlLWV2ZW50cy10YXJnZXQnKTtcbiAgICAkKCcucGFnZS11cGNvbWluZy1jb25jZXJ0cycpLmNzcygnbWluLWhlaWdodCcsIGN1cnJlbnRDb250YWluZXJIZWlnaHQpO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogd3BBamF4LmFqYXhVcmwsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFjdGlvbjogXCJmaWx0ZXJcIixcbiAgICAgICAgdmVudWVJRDogXCJub24tdmVudWUtY2hvaWNlXCIsXG4gICAgICAgIGRhdGVjaG9pY2U6IGRhdGVjaG9pY2UsXG4gICAgICAgIGRhdGVGcm9tQWpheDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGFuaW1hdGVBamF4KFxuICAgICAgICAgIFwiLmFqYXgtanMtY2hhbmdlLWV2ZW50cy10YXJnZXRcIixcbiAgICAgICAgICBcImhpc3Rvcnktd3JhcHBlcl9fb24tc2NyZWVuXCIsXG4gICAgICAgICAgXCJoaXN0b3J5LXdyYXBwZXJfX29mZi1zY3JlZW5cIixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgICcucGFnZS11cGNvbWluZy1jb25jZXJ0cydcbiAgICAgICAgKTtcbiAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikuZmFkZU91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikucmVtb3ZlKCk7XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9ISVNUT1JZIEFKQVggPSBHRVQgU1BFQ0lGSUVEIFlFQVIgU1RBVFMsIEFSVElTVFMgQU5EIEdBTExFUllcblxuICAkKFwiLmZlc3RpdmFsLXllYXItdG9nZ2xlci1qcy1hamF4XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZmVzdGl2YWxRdWVyeVllYXIgPSAkKHRoaXMpLmRhdGEoXCJmZXN0aXZhbC15ZWFyXCIpO1xuICAgICQoXCIuZXh0cmEteWVhci1pbmZvLWpzXCIpLnRleHQoZmVzdGl2YWxRdWVyeVllYXIpO1xuICAgIGlmIChcbiAgICAgICQoXCIuZmVzdGl2YWwteWVhci10b2dnbGVyLWpzLWFqYXhcIikuaGFzQ2xhc3MoXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiKVxuICAgICkge1xuICAgICAgJChcIi5mZXN0aXZhbC15ZWFyLXRvZ2dsZXItanMtYWpheFwiKS5yZW1vdmVDbGFzcyhcbiAgICAgICAgXCJzb3J0LWJ5LXRvZ2dsZXJfX2FjdGl2ZVwiXG4gICAgICApO1xuICAgIH1cbiAgICAkKHRoaXMpLmFkZENsYXNzKFwic29ydC1ieS10b2dnbGVyX19hY3RpdmVcIik7XG5cblxuXG4gICAgJChcIi50YXJnZXQtZGl2LWZvci1tb2RhbC1hbmQtc3Bpbm5lci1qc1wiKVxuICAgIC5oaWRlKClcbiAgICAuYXBwZW5kKFxuICAgICAgYDxkaXYgY2xhc3M9XCJpZ19sb2FkaW5nLXNwaW5uZXIgICBcIj5cbjwvZGl2PmBcbiAgICApLmZhZGVJbigyMDApO1xuXG4gICAgY29uc3QgY3VycmVudENvbnRhaW5lckhlaWdodCA9IHByZUFqYXhTZXR1cCgnLmhpc3Rvcnktd3JhcHBlcicpO1xuICAgICQoJy5jdXJyZW50LXllYXItYXJ0aXN0c19faGlzdG9yeScpLmNzcygnbWluLWhlaWdodCcsIGN1cnJlbnRDb250YWluZXJIZWlnaHQpO1xuICAgIFxuICAgIFxuICAgICQuYWpheCh7XG4gICAgICB1cmw6IHdwQWpheC5hamF4VXJsLFxuICAgICAgZGF0YTogeyBhY3Rpb246IFwiZ2V0SGlzdG9yeVwiLCBmZXN0aXZhbFF1ZXJ5WWVhciB9LFxuICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoJChcIi5oaXN0b3J5LXdyYXBwZXJcIikuaHRtbCgpICE9PSBkYXRhKSB7XG4gICAgICAgICAgYW5pbWF0ZUFqYXgoXG4gICAgICAgICAgICBcIi5oaXN0b3J5LXdyYXBwZXJcIixcbiAgICAgICAgICAgIFwiaGlzdG9yeS13cmFwcGVyX19vbi1zY3JlZW5cIixcbiAgICAgICAgICAgIFwiaGlzdG9yeS13cmFwcGVyX19vZmYtc2NyZWVuXCIsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgJy5jdXJyZW50LXllYXItYXJ0aXN0c19faGlzdG9yeSdcbiAgICAgICAgICApO1xuICAgICAgICAgICQoXCIuaWdfbG9hZGluZy1zcGlubmVyXCIpLmZhZGVPdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5pZ19sb2FkaW5nLXNwaW5uZXJcIikucmVtb3ZlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG5cbi8vIGdldCB0aGUgaGVpZ2h0IG9mIHRoZSBldmVudHMgY29udGFpbmVyIGFuZCBjaGFuZ2UgaXQgb25seSBhZnRlciBhamF4IGhhcyBiZWVuIGZpbmlzaGVkIFxuXG5cbmNvbnN0IHByZUFqYXhTZXR1cCA9ICh0YXJnZXREaXYpID0+IHtcbiAgaWYoJCh0YXJnZXREaXYpLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gJCh0YXJnZXREaXYpLmhlaWdodCgpO1xuICAgIFxuICB9XG59XG5cblxuaWYoJCgncDpoYXMoaWZyYW1lKScpKSB7XG4gIC8vICQocCkuY3NzKHsnZGlzcGxheScgOiAnZmxleCcsICdqdXN0aWZ5LWNvbnRlbnQnIDogJ2NlbnRlcid9KVxufVxuXG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==